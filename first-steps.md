## å¼€å§‹ä½¿ç”¨

### å­¦ä¹ èµ„æº

ğŸ“š **å­¦ä¹ èµ„æº**

- [ğŸ“– Luaæ•™ç¨‹](https://www.runoob.com/lua/lua-tutorial.html)
- [âš¡ 10åˆ†é’Ÿå¿«é€Ÿå…¥é—¨](https://learnxinyminutes.com/lua/)

å¦‚æœæ‚¨å·²ç»äº†è§£äº†åŸºæœ¬çŸ¥è¯†ï¼Œç°åœ¨å°±å¯ä»¥å¼€å§‹ç¼–å†™è„šæœ¬äº†ã€‚

## å¼€å‘ç¯å¢ƒ

### é€‰æ‹©ç¼–è¾‘å™¨ ğŸ’»

æ–°æ‰‹æ¨èä½¿ç”¨ï¼š[Visual Studio Code](https://code.visualstudio.com/)

æœ‰ç»éªŒçš„å¼€å‘è€…å¯ä»¥ä½¿ç”¨è‡ªå·±ç†Ÿæ‚‰çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚

### è„šæœ¬ä½ç½® ğŸ“‚

è„šæœ¬æ–‡ä»¶åº”æ”¾ç½®åœ¨ï¼š`<CS2>/game/csgo/fatality/scripts`

æ‚¨å¯èƒ½æ³¨æ„åˆ°è¿˜æœ‰ä¸€ä¸ª `lib` ç›®å½•ï¼Œæˆ‘ä»¬ç¨åä¼šè¯¦ç»†ä»‹ç»ã€‚

> â„¹ï¸ **æ³¨æ„**ï¼šåˆ›å»ºçš„è„šæœ¬æ–‡ä»¶å¿…é¡»ä»¥ `.lua` ç»“å°¾

> âš ï¸ **è­¦å‘Š**ï¼š`.ljbc` æ ¼å¼ä¸èƒ½ä»æœ¬åœ°æºåŠ è½½

## ç¬¬ä¸€ä¸ªè„šæœ¬

### ç¤ºä¾‹ä»£ç  ğŸš€

> âš ï¸ ç›®å‰fatalityä¸æ”¯æŒä¸­æ–‡ï¼Œè¯·ä½¿ç”¨è‹±æ–‡

```lua
local function on_present_queue()
    local d = draw.surface;
    d.font = draw.fonts['gui_main'];
    d:add_text(draw.vec2(50, 50),
        'hello world',
         draw.color.white()
    );
end

events.present_queue:add(on_present_queue);
```

### ä»£ç è§£æ

#### ğŸ”„ å®šä¹‰å›è°ƒå‡½æ•°

`on_present_queue` æ˜¯ä¸€ä¸ª**å›è°ƒå‡½æ•°**ï¼Œå®ƒå°†åœ¨æ¯ä¸ªæ¸²æŸ“å¸§è¢«è°ƒç”¨ã€‚

#### ğŸ¨ è·å–ç»˜å›¾è¡¨é¢

`draw.surface` æ˜¯ä¸€ä¸ªå…¨å±€ç»˜å›¾è¡¨é¢ï¼Œå…è®¸æ‚¨åœ¨å±å¹•ä¸Šç»˜åˆ¶å„ç§å›¾å½¢å’Œæ–‡æœ¬ã€‚

#### ğŸ“ è®¾ç½®å­—ä½“

`draw.fonts['gui_main']` æ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„å­—ä½“ï¼Œç”¨äºåœ¨ç”¨æˆ·ç•Œé¢ä¸­ç»˜åˆ¶æ–‡æœ¬ã€‚

#### âœï¸ æ·»åŠ æ–‡æœ¬

`d:add_text()` æ–¹æ³•ç”¨äºåœ¨å±å¹•ä¸Šç»˜åˆ¶æ–‡æœ¬ï¼Œæ¥å—ä»¥ä¸‹å‚æ•°ï¼š

- æ–‡æœ¬ä½ç½®ï¼ˆä½¿ç”¨ `draw.vec2` åˆ›å»ºçš„ 2D å‘é‡ï¼‰
- è¦æ˜¾ç¤ºçš„æ–‡æœ¬å­—ç¬¦ä¸²
- æ–‡æœ¬é¢œè‰²ï¼ˆä½¿ç”¨ `draw.color.white()` åˆ›å»ºçš„ç™½è‰²ï¼‰

#### ğŸ”Œ æ³¨å†Œäº‹ä»¶

`events.present_queue:add(on_present_queue)` å°†å›è°ƒå‡½æ•°æ³¨å†Œåˆ°æ¸²æŸ“é˜Ÿåˆ—äº‹ä»¶ä¸­ï¼Œä½¿å…¶åœ¨æ¯æ¬¡æ¸²æŸ“å¸§æ—¶è¢«è°ƒç”¨ã€‚

## æ·»åŠ ç”¨æˆ·ç•Œé¢

> ç°åœ¨æ‚¨å·²ç»äº†è§£äº†åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬é€šè¿‡æ·»åŠ äº¤äº’å…ƒç´ æ¥æ‰©å±•è„šæœ¬ã€‚æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªå¤é€‰æ¡†ï¼Œç”¨äºæ§åˆ¶æ–‡æœ¬çš„æ˜¾ç¤ºã€‚

### åˆ›å»ºæ§ä»¶ ğŸ”˜

```lua
local cb = gui.checkbox(gui.control_id('my_checkbox'));
```

#### ğŸ†” æ§ä»¶ID

æ¯ä¸ªæ§ä»¶éƒ½éœ€è¦ä¸€ä¸ª**å”¯ä¸€ID**ï¼ŒUIæ¡†æ¶ä½¿ç”¨è¿™ä¸ªIDæ¥åŒºåˆ†å®¹å™¨ä¸­çš„æ§ä»¶ã€‚ç¡®ä¿æ‚¨çš„æ§ä»¶IDä¸ä¼šä¸å…¶ä»–æ§ä»¶å†²çªï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´çŠ¶æ€æŸåã€‚

#### ğŸ§© åˆ›å»ºå¤é€‰æ¡†

`gui.checkbox()` å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªå¤é€‰æ¡†æ§ä»¶ï¼Œå®ƒæ¥å—ä¸€ä¸ªç”± `gui.control_id()` åˆ›å»ºçš„IDç»“æ„ã€‚

### æ„å»ºUIå¸ƒå±€ ğŸ“‹

```lua
-- åˆ›å»ºä¸€ä¸ªå¸¦æ ‡ç­¾çš„è¡Œ
local row = gui.make_control('æ˜¾ç¤ºæ–‡æœ¬', cb);

-- æ‰¾åˆ°ç›®æ ‡åˆ†ç»„
local group = gui.ctx:find('lua>elements a');

-- å°†è¡Œæ·»åŠ åˆ°åˆ†ç»„ä¸­
group:add(row);
```

#### ğŸ“ æ„å»ºè¡Œ

`gui.make_control()` å‡½æ•°å°†æ§ä»¶åŒ…è£…åˆ°ç”±æ ‡ç­¾å’Œæ§ä»¶ç»„æˆçš„å¸ƒå±€ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç¾è§‚çš„è¡Œå¸ƒå±€ã€‚

#### ğŸ” æŸ¥æ‰¾åˆ†ç»„

`gui.ctx:find()` æ–¹æ³•ç”¨äºåœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾æŒ‡å®šIDçš„åˆ†ç»„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `'lua>elements a'` åˆ†ç»„ã€‚

> â„¹ï¸ **æç¤º**ï¼šè¦æŸ¥çœ‹åˆ†ç»„å’Œæ§ä»¶IDï¼Œæ‚¨å¯ä»¥åœ¨SCRIPTSé€‰é¡¹å¡ä¸­å¯ç”¨**è°ƒè¯•æ¨¡å¼**

#### â• æ·»åŠ åˆ°åˆ†ç»„

`group:add()` æ–¹æ³•å°†è¡Œæ·»åŠ åˆ°æ‰¾åˆ°çš„åˆ†ç»„ä¸­ï¼Œä½¿å…¶åœ¨UIä¸­å¯è§ã€‚

### ä½¿ç”¨æ§ä»¶å€¼ ğŸ”„

```lua
local function on_present_queue()
    -- åªåœ¨å¤é€‰æ¡†è¢«é€‰ä¸­æ—¶æ˜¾ç¤ºæ–‡æœ¬
    if cb:get_value():get() then
        local d = draw.surface;
        d.font = draw.fonts['gui_main'];
        d:add_text(draw.vec2(50, 50),
            'hello world',
            draw.color.white()
        );
    end
end
```

`cb:get_value():get()` ç”¨äºè·å–å¤é€‰æ¡†çš„å½“å‰çŠ¶æ€ï¼ˆé€‰ä¸­æˆ–æœªé€‰ä¸­ï¼‰ã€‚è¿™ä¸ªè¡¨è¾¾å¼è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¯ä»¥åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ã€‚

### å®Œæ•´ç¤ºä¾‹ ğŸ“„

```lua
-- åˆ›å»ºUIæ§ä»¶
local cb = gui.checkbox(gui.control_id('my_checkbox'));
local row = gui.make_control('æ˜¾ç¤ºæ–‡æœ¬', cb);
local group = gui.ctx:find('lua>elements a');
group:add(row);

-- å®šä¹‰æ¸²æŸ“å›è°ƒ
local function on_present_queue()
    if cb:get_value():get() then
        local d = draw.surface;
        d.font = draw.fonts['gui_main'];
        d:add_text(draw.vec2(50, 50),
            'hello world',
            draw.color.white()
        );
    end
end

-- æ³¨å†Œäº‹ä»¶
events.present_queue:add(on_present_queue);
```

## ä¸‹ä¸€æ­¥ ğŸ‘‰

æ­å–œï¼æ‚¨å·²ç»å®Œæˆäº†ç¬¬ä¸€ä¸ªå¸¦æœ‰äº¤äº’ç•Œé¢çš„Fatality Luaè„šæœ¬ã€‚æ¥ä¸‹æ¥ï¼Œæ‚¨å¯ä»¥æ¢ç´¢æ›´å¤šé«˜çº§åŠŸèƒ½ï¼Œå¦‚é¢œè‰²é€‰æ‹©å™¨ã€æ»‘å—å’ŒæŒ‰é’®ç­‰æ§ä»¶ï¼Œä»¥åˆ›å»ºæ›´å¤æ‚çš„è„šæœ¬ã€‚