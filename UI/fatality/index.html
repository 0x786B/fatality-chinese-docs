<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FATALITY - Web UI</title>
    <style>
        :root {
            --bg-color: #131313;
            --panel-bg: #1c1c1c;
            --sidebar-bg: #161616;
            --accent-color: #6b68ff;
            --purple: #6b68ff;
            --orange: #ff9c4a;
            --red: #ff4a4a;
            --green: #4aff4a;
            --text-color: #e0e0e0;
            --secondary-text: #a0a0a0;
            --header-height: 56px;
            /* 修改头部高度 */
            --footer-height: 36px;
            --base-font-size: 14px;
            --small-font-size: 13px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: var(--base-font-size);
        }

        body {
            background-color: #222;
            color: var(--text-color);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex-direction: column;
            width: 1100px;
            height: 800px;
            background-color: #131313;
            border-radius: 6px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            position: absolute;
            overflow: hidden;
        }

        /* 拖动区域 */
        .drag-handle {
            position: absolute;
            top: 0;
            left: 0;
            width: 120px;
            /* 只覆盖logo区域，不覆盖菜单 */
            height: var(--header-height);
            cursor: move;
            z-index: 10;
            /*添加更明显的视觉提示*/
            background: linear-gradient(to bottom, rgba(40, 40, 40, 0.2), transparent);
        }

        /* 头部样式 - 一级菜单 */
        header {
            height: var(--header-height);
            background-color: #191919;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 5;
        }

        .logo {
            color: var(--accent-color);
            font-size: 26px;
            font-weight: bold;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-right: 60px;
            text-shadow: 0 0 8px rgba(107, 104, 255, 0.7);
        }

        .main-nav {
            display: flex;
            list-style: none;
            flex: 1;
            gap: 32px;
        }

        .main-nav li {
            display: flex;
            align-items: center;
        }

        .main-nav li a {
            color: var(--secondary-text);
            text-decoration: none;
            text-transform: uppercase;
            font-size: 15px;
            transition: all 0.2s;
            padding: 0 8px;
            height: 40px;
            display: flex;
            align-items: center;
            position: relative;
        }

        .main-nav li.active a {
            color: #ff00cc;
            /* 紫红色 */
            font-weight: 600;
            text-shadow: 0 0 10px rgba(255, 0, 204, 0.4);
        }

        .main-nav li a:hover {
            color: var(--text-color);
        }

        .nav-icon {
            margin-right: 5px;
            font-size: 16px;
            opacity: 0.8;
        }

        .user-info {
            display: flex;
            align-items: center;
            margin-left: auto;
            padding: 6px 12px;
        }

        .username {
            font-size: 14px;
            color: #fffefe;
            line-height: 1.2;
            font-weight: normal;
        }

        .expires {
            color: #aaa;
            font-size: 16px;
            line-height: 1.2;
        }

        .avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background-color: #222;
            border: 2px solid #444;
            overflow: hidden;
            margin-left: 12px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }

        /* 用户信息区域的新样式 */
        .user-info-container {
            display: flex;
            align-items: center;
            text-align: right;
        }

        .user-text-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        /* 内容区域样式 */
        .content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* 左侧边栏 - 二级菜单区域 */
        .sidebar {
            width: 140px;
            display: flex;
            flex-direction: column;
            padding-top: 5px;
            padding-left: 20px;
            min-height: 600px;
            /* 确保侧边栏有足够的高度 */
        }

        /* 侧边栏标签切换 */
        .sidebar-tabs {
            display: flex;
        }

        /* 当显示anti-aim页面时隐藏侧边栏 */
        body.show-anti-aim .sidebar {
            display: flex;
            /* 改为flex确保sidebar仍然显示 */
        }

        /* 当显示anti-aim页面时只隐藏子菜单 */
        body.show-anti-aim .sub-menu {
            display: none;
        }

        /* 当显示anti-aim页面时调整内容区域 */
        body.show-anti-aim .page-content {
            flex-direction: column;
            /* 内容垂直排列 */
            padding-top: 42px;
            /* 为sidebar-tabs留出空间 */
            margin-left: 0;
            padding-left: 0;
        }

        /* 调整sidebar在显示anti-aim时的高度，只显示tabs部分 */
        body.show-anti-aim .sidebar {
            height: auto;
            min-height: auto;
            border-right: none;
        }

        /* Anti-aim页面样式 */
        .anti-aim-page {
            padding-left: 8px;
            /* 添加左侧间距 */
            margin-left: 0;
            /* 移除左侧边距，让内容靠左 */
        }

        /* 当显示anti-aim页面时进一步调整 */
        body.show-anti-aim .anti-aim-page {
            margin-left: -120px;
            /* 添加额外的左侧边距 */
            margin-top: -45px;
        }

        /* 当显示anti-aim页面时调整内容层次 */
        body.show-anti-aim .page-content {
            flex-direction: column;
            /* 内容垂直排列 */
            padding-top: 42px;
            /* 为sidebar-tabs留出空间 */
        }

        .sidebar-tab {
            padding: 12px 0;
            cursor: pointer;
            color: #888;
            flex: 1;
            text-align: center;
            font-size: 15px;
            position: relative;
            display: block;
            /* 恢复为block显示 */
        }

        .sidebar-tab-text {
            display: inline-block;
            /* 让文本容器自适应宽度 */
            position: relative;
            /* 为after伪元素定位做准备 */
        }

        .sidebar-tab.active {
            color: #e0e0e0;
        }

        .sidebar-tab.active .sidebar-tab-text::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -13px;
            /* 调整红线位置到底部 */
            height: 2px;
            background-color: #ff4a4a;
            width: 100%;
        }

        /* 二级菜单 */
        .sub-menu {
            list-style: none;
            padding: 0;
            flex: 1;
            display: none;
        }

        .sub-menu.active {
            display: block;
        }

        .sub-menu-item {
            padding: 5px 20px;
            cursor: pointer;
            color: #888;
            position: relative;
            font-size: 15px;
            border-left: 2px solid transparent;
            margin-bottom: 2px;
        }

        .sub-menu-item.active {
            color: #e0e0e0;
            border-left: 3px solid #ff4a4a;
            margin-left: 10px;
        }

        /* 修改:激活菜单项的红色指示条 - 移除旧的样式 */
        .sub-menu-item.active::before {
            content: none;
        }

        .add-button {
            padding: 15px 35px;
            color: #888;
            cursor: pointer;
            font-size: 15px;
        }

        .add-button:hover {
            color: #fff3f3;
        }

        /* 主内容区域 */
        .page-content {
            flex: 1;
            display: flex;
            padding: 0 18px 8px 8px;
            /* 修改padding，去掉顶部的padding */
            gap: 18px;
            background-color: #131313;
            margin-top: 62px;
            /* 添加上边距，与侧边栏标签底部的线对齐 */
            height: 630px;
            /* 确保页面有足够的高度 */
        }

        /* LEGIT页面主内容区域样式调整 */
        body.show-legit .page-content {
            margin-top: 30px;
        }

        .page {
            display: none;
            flex: 1;
            gap: 15px;
        }

        .page.active {
            display: flex;
        }

        .panel {
            background-color: #181818;
            border-radius: 3px;
            padding: 14px 16px;
            flex: 1;
            border: 1px solid #222;
            position: relative;
        }

        h2 {
            font-size: 13px;
            margin-bottom: 12px;
            color: #777;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: bold;
            position: absolute;
            top: -8px;
            left: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            margin-top: 0;
        }

        .option:first-of-type {
            margin-top: 10px;
        }

        .option-name {
            flex: 1;
            font-size: 14px;
            color: #d0d0d0;
        }

        .option-name.tooltip.orange {
            color: var(--orange);
        }

        .orange {
            color: #ff9c4a;
        }

        .option-value {
            color: var(--secondary-text);
            font-size: 14px;
        }

        /* 滑块组件样式 */
        .slider-container {
            position: relative;
            width: 140px;
        }

        .slider-track {
            width: 100%;
            height: 20px;
            background-color: #222;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .slider-fill {
            height: 100%;
            background-color: #ff4a4a;
            border-radius: 2px;
            position: absolute;
            left: 0;
            top: 0;
        }

        .slider-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18x;
            color: white;
            pointer-events: none;
            white-space: nowrap;
            font-weight: 500;
        }

        /* 特殊值样式 - 移除特殊灰色样式 */
        /* 
        #hit-chance-slider .slider-value,
        #min-damage-slider .slider-value {
            color: #aaa;
        }
        */

        /* 所有滑块统一使用白色文字 */
        #hit-chance-slider .slider-value,
        #min-damage-slider .slider-value,
        #max-fov-slider .slider-value,
        #pointscale-slider .slider-value {
            color: white;
        }

        /* 红色滑块值样式 */
        #pointscale-slider .slider-value {
            color: white;
        }

        .dropdown {
            background-color: #222;
            padding: 6px 10px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            width: 140px;
            justify-content: space-between;
            font-size: 14px;
            color: #888;
            position: relative;
            cursor: pointer;
            height: 24px;
        }

        .arrow {
            font-size: 10px;
            margin-left: 8px;
            color: #666;
        }

        /* 下拉菜单样式 */
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            border-radius: 3px;
            margin-top: 2px;
            z-index: 100;
            display: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .dropdown.active .dropdown-menu {
            display: block;
        }

        .dropdown-item {
            padding: 8px 12px;
            color: #888;
            cursor: pointer;
            font-size: 14px;
        }

        .dropdown-item:hover {
            background-color: #222;
            color: #ff4a4a;
        }

        /* 多选框样式 */
        .dropdown-item.selected {
            color: #ff4a4a;
        }

        /* 单选框样式 */
        .dropdown-item.active {
            color: #ff4a4a;
        }

        /* 下拉菜单显示样式 */
        .dropdown-display {
            color: #888;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 120px;
        }

        .checkbox {
            width: 22px;
            height: 22px;
            border-radius: 4px;
            background-color: #222;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #333;
        }

        .checkbox.checked {
            background-color: transparent;
            border-color: #333;
        }

        .checkbox.checked::after {
            content: "✓";
            color: white;
            font-size: 14px;
        }

        .settings-icon {
            margin-right: 10px;
            cursor: pointer;
            font-size: 15px;
            color: #666;
        }

        .toggle {
            display: flex;
            width: 50px;
            height: 18px;
            background-color: #333;
            border-radius: 9px;
            overflow: hidden;
        }

        .toggle-off,
        .toggle-on {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toggle-off {
            background-color: var(--red);
        }

        .toggle-on {
            background-color: var(--green);
        }

        .key-bind {
            width: 18px;
            height: 18px;
            background-color: #333;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: var(--secondary-text);
        }

        /* 底部样式 */
        footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: var(--footer-height);
            padding: 0 15px;
            background-color: #111;
            border-top: 1px solid #333;
        }

        .footer-icons {
            display: flex;
        }

        .icon {
            margin-right: 15px;
            cursor: pointer;
            color: var(--secondary-text);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
        }

        .icon svg {
            width: 30px;
            height: 30px;
            fill: #888;
            transition: fill 0.2s;
        }

        .icon:hover svg {
            fill: #e0e0e0;
        }

        .info-icon {
            cursor: pointer;
            color: var(--secondary-text);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
        }

        .info-icon svg {
            width: 16px;
            height: 16px;
            fill: #888;
            transition: fill 0.2s;
        }

        .info-icon:hover svg {
            fill: #e0e0e0;
        }

        /* 自定义滚动条 */
        ::-webkit-scrollbar {
            width: 4px;
            height: 4px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 2px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* 特殊样式 */
        .bullet-point {
            display: flex;
            align-items: center;
        }

        .bullet-point::before {
            content: "•";
            margin-right: 8px;
            color: var(--secondary-text);
            font-size: 18px;
        }

        /* 设置面板样式 */
        .settings-panel {
            position: absolute;
            background-color: #181818;
            border: 1px solid #222;
            border-radius: 3px;
            padding: 10px;
            z-index: 1000;
            display: none;
            min-width: 200px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        }

        .settings-panel.active {
            display: block;
        }

        .settings-panel-title {
            display: none;
            /* 隐藏标题 */
        }

        .settings-option {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            justify-content: space-between;
        }

        .settings-option:last-child {
            margin-bottom: 0;
        }

        .settings-option-name {
            font-size: 14px;
            color: #d0d0d0;
            margin-right: 12px;
        }

        .settings-option .checkbox.checked {
            background-color: transparent;
        }

        .settings-panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 999;
            display: none;
        }

        .settings-panel-overlay.active {
            display: block;
        }

        /* 特殊样式 */
        .bullet-point {
            display: flex;
            align-items: center;
        }

        .bullet-point::before {
            content: "•";
            margin-right: 8px;
            color: var(--secondary-text);
            font-size: 18px;
        }

        .settings-panel .dropdown {
            height: 24px;
            background-color: #222;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 14px;
            color: #888;
        }

        .settings-panel .dropdown-menu {
            background-color: #1a1a1a;
            margin-top: 2px;
            width: 100%;
        }

        .settings-panel .dropdown-item {
            padding: 6px 10px;
        }

        .settings-panel .dropdown-display {
            color: #888;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 120px;
        }

        .settings-option.mode-label {
            margin-bottom: 8px;
        }

        .settings-option.mode-label .settings-option-name {
            color: #888;
            font-weight: bold;
        }

        /* 工具提示样式 */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: max-content;
            max-width: 300px;
            background-color: #1a1a1a;
            color: #aaa;
            text-align: left;
            border-radius: 4px;
            padding: 8px 10px;
            position: absolute;
            z-index: 10000;
            top: 125%;
            left: 0;
            opacity: 0;
            transition: opacity 0.15s;
            font-size: 13px;
            border: 1px solid #333;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
            pointer-events: none;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            display: block;
            -webkit-hyphens: auto;
            hyphens: auto;
        }

        /* 超短文本处理 */
        .tooltip .tooltip-text.short {
            width: auto;
            min-width: 0;
        }

        /* 右侧越界处理 */
        @media screen and (max-width: 800px) {
            .tooltip .tooltip-text {
                left: auto;
                right: 0;
            }
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* 复选框悬停效果 */
        .option:hover .checkbox:not(.checked)::after,
        .settings-option:hover .checkbox:not(.checked)::after,
        .checkbox:not(.checked):hover::after {
            content: "✓";
            color: #555;
            font-size: 14px;
        }

        /* 添加颜色选择器样式 */
        .color-picker-container {
            position: absolute;
            z-index: 2000;
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 5px;
            width: 260px;
            padding: 12px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.5);
            display: none;
        }

        .color-picker-container.active {
            display: block;
        }

        .color-selector {
            position: relative;
            width: 100%;
            height: 225px;
            margin-bottom: 12px;
        }

        .color-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 200px;
            height: 200px;
            background-image: linear-gradient(to right, #fff, rgba(255, 0, 0, 0));
            border-radius: 3px;
            cursor: crosshair;
        }

        .saturation-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0));
            border-radius: 3px;
        }

        .color-slider {
            position: absolute;
            top: 0;
            right: 0;
            width: 20px;
            height: 200px;
            background-image: linear-gradient(to bottom,
                    #ff0000, #ff00ff, #0000ff,
                    #00ffff, #00ff00, #ffff00, #ff0000);
            border-radius: 3px;
            cursor: pointer;
        }

        .color-picker-cursor {
            position: absolute;
            width: 12px;
            height: 12px;
            border: 2px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .color-slider-cursor {
            position: absolute;
            right: 0;
            width: 20px;
            height: 5px;
            border: 2px solid white;
            box-sizing: border-box;
            transform: translateY(-50%);
            pointer-events: none;
        }

        /* 删除旧的颜色预览和透明度滑块样式 */
        .color-preview {
            display: none;
        }

        /* 修改透明度滑块样式，使其成为一个同时显示颜色预览的控件 */
        .opacity-slider-container {
            width: 100%;
            height: 20px;
            background-color: #222;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            margin: 15px 0;
        }

        .opacity-slider-fill {
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            border-radius: 2px;
        }

        .opacity-slider-thumb {
            position: absolute;
            width: 4px;
            height: 20px;
            background-color: white;
            top: 0;
            transform: translateX(-50%);
            pointer-events: none;
        }

        /* 恢复颜色选择器按钮样式 */
        .color-option {
            width: 18px;
            height: 18px;
            border-radius: 3px;
            cursor: pointer;
            border: 1px solid #333;
        }

        .color-value {
            width: 100%;
            height: 24px;
            background-color: #222;
            color: #888;
            border: none;
            padding: 0 8px;
            border-radius: 3px;
            text-align: center;
        }

        .opacity-slider-thumb {
            position: absolute;
            width: 4px;
            height: 20px;
            background-color: white;
            top: 0;
            transform: translateX(-50%);
            pointer-events: none;
        }

        /* 颜色选择器面板底部按钮区域样式 */
        .color-picker-actions {
            display: flex;
            align-items: center;
            margin-top: 5px;
            position: relative;
        }

        .color-action-icon {
            width: 20px;
            height: 20px;
            margin-right: 5px;
            cursor: pointer;
            opacity: 0.7;
            position: relative;
        }

        .color-action-icon:hover {
            opacity: 1;
        }

        .color-action-icon .tooltip-text {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            padding: 4px 8px;
            border-radius: 3px;
            white-space: nowrap;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 12px;
            pointer-events: none;
            z-index: 10;
        }

        .color-action-icon:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* 恢复颜色选择器按钮样式 */
        .color-option {
            width: 18px;
            height: 18px;
            border-radius: 3px;
            cursor: pointer;
            border: 1px solid #333;
        }

        /* 当显示anti-aim页面时隐藏侧边栏中的子菜单 */
        body.show-anti-aim .sub-menu {
            display: none;
        }

        .days {
            color: var(--red);
            font-weight: normal;
        }

        /* 颜色选择器样式 */
        .opacity-slider-container {
            position: relative;
            width: 100%;
            height: 20px;
            margin: 10px 0;
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
            background-image:
                linear-gradient(45deg, #888 25%, transparent 25%),
                linear-gradient(-45deg, #888 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #888 75%),
                linear-gradient(-45deg, transparent 75%, #888 75%);
            background-size: 8px 8px;
            background-position: 0 0, 0 4px, 4px -4px, -4px 0px;
            border: 1px solid #333;
        }

        .opacity-slider-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1));
            pointer-events: none;
        }

        .opacity-slider-thumb {
            position: absolute;
            top: 0;
            left: 100%;
            width: 4px;
            height: 100%;
            background-color: #fff;
            border-radius: 2px;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            transform: translateX(-2px);
        }

        /* 公告横幅样式 */
        .announcements {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 9999;
        }

        .announcement {
            background-color: rgba(30, 30, 30, 0.9);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 4px solid #6b68ff;
            max-width: 250px;
            animation: slide-in 0.5s ease-out, glow 2s infinite alternate;
        }

        .announcement:nth-child(2) {
            border-left-color: #ff00cc;
            animation-delay: 0.2s;
        }

        .announcement:nth-child(3) {
            border-left-color: #ff9c4a;
            animation-delay: 0.4s;
        }

        .announcement-icon {
            font-size: 24px;
        }

        .announcement-content {
            flex: 1;
        }

        .announcement-title {
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }

        .announcement-text {
            color: #ccc;
            font-size: 13px;
        }

        @keyframes slide-in {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 5px rgba(107, 104, 255, 0.1);
            }

            to {
                box-shadow: 0 0 15px rgba(107, 104, 255, 0.3);
            }
        }
        
        /* 右上角信息区域样式 */
        .top-right-info {
            position: fixed;
            top: 15px;
            right: 15px;
            display: flex;
            align-items: center;
            background-color: rgba(30, 30, 30, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            z-index: 9999;
            font-size: 13px;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(80, 80, 80, 0.3);
            transition: all 0.3s ease;
        }
        
        .top-right-info:hover {
            background-color: rgba(35, 35, 35, 0.95);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5), 0 0 15px rgba(107, 104, 255, 0.2);
            transform: translateY(2px);
        }
        
        .top-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 12px;
            box-shadow: 0 0 8px rgba(107, 104, 255, 0.5);
            border: 2px solid rgba(107, 104, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .top-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .top-right-info:hover .top-avatar {
            border-color: rgba(107, 104, 255, 0.7);
            box-shadow: 0 0 12px rgba(107, 104, 255, 0.7);
        }
        
        .top-right-info:hover .top-avatar img {
            transform: scale(1.1);
        }
        
        .top-info-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .top-info-logo {
            font-weight: bold;
            color: #6b68ff;
            margin-bottom: 4px;
            text-shadow: 0 0 8px rgba(107, 104, 255, 0.4);
            letter-spacing: 1px;
            font-size: 15px;
        }
        
        .top-info-details {
            display: flex;
            align-items: center;
        }
        
        .top-info-divider {
            color: #555;
            margin: 0 6px;
            font-size: 12px;
        }
        
        .top-info-item {
            color: #bbb;
            white-space: nowrap;
            font-size: 12px;
        }
        
        .info-highlight {
            color: #ff9c4a;
            font-weight: bold;
        }
        
        #current-time {
            color: #b0b0b0;
            font-weight: 500;
        }
    </style>
</head>

<body>
    <!-- 左侧公告横幅 -->
    <div class="announcements">
        <div class="announcement">
            <div class="announcement-icon">❓</div>
            <div class="announcement-content">
                <div class="announcement-title">这是什么？</div>
                <div class="announcement-text">这是一个fatality的可交互式UI</div>
                <div class="announcement-text">当鼠标放在文字标签上时</div>
                <div class="announcement-text">会显示该功能的说明</div>
            </div>
        </div>
        <div class="announcement">
            <div class="announcement-icon">🖱️</div>
            <div class="announcement-content">
                <div class="announcement-title">已支持拖动UI</div>
                <div class="announcement-text">FATALITY区域可拖动UI</div>
            </div>
        </div>
        <div class="announcement">
            <div class="announcement-icon">✅</div>
            <div class="announcement-content">
                <div class="announcement-title">已完成页面</div>
                <div class="announcement-text">RAGE - Aimbot页面已支持</div>
                <div class="announcement-text">RAGE - Anti-aim页面已支持</div>
                <div class="announcement-text">LEGIT - 全部页面已支持</div>
            </div>
        </div>
        <div class="announcement">
            <div class="announcement-icon">🎮</div>
            <div class="announcement-content">
                <div class="announcement-title">已支持UI</div>
                <div class="announcement-text">Slider滑块条</div>
                <div class="announcement-text">Checkbox复选框</div>
                <div class="announcement-text">combo_box选择框</div>
                <div class="announcement-text">单选模式/多选模式</div>
                <div class="announcement-text">⚙️面板已支持</div>
                <div class="announcement-text">color_picker颜色选择器已支持</div>
            </div>
        </div>
        <div class="announcement">
            <div class="announcement-icon">🎯</div>
            <div class="announcement-content">
                <div class="announcement-title">画饼</div>
                <div class="announcement-text">全部页面支持？</div>
                <div class="announcement-text">全部组件支持？</div>
                <div class="announcement-text">支持在WEB UI调参√</div>
                <div class="announcement-text">支持导入/导出配置?</div>
                <div class="announcement-text">支持更多语言的翻译?</div>
            </div>
        </div>
    </div>
    
    <!-- 右上角LOGO和信息区域 -->
    <div class="top-right-info">
        <div class="top-avatar">
            <img src="https://928777311-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/organizations%2FRc8lKzugjqovdk120qVl%2Fsites%2Fsite_dW5Sg%2Ficon%2FR4K8IVAKqKBik6Ct0U3w%2Fimage.avif?alt=media&token=cd45ac3f-9ef5-43a9-a9a3-4919ab291984" alt="avatar">
        </div>
        <div class="top-info-content">
            <div class="top-info-logo">FATALITY.WIN for CS2 WEB UI</div>
            <div class="top-info-details">
                <div class="top-info-item">Version 1.0.0</div>
                <div class="top-info-divider">|</div>
                <div class="top-info-item"><span class="info-highlight">0</span> ping</div>
                <div class="top-info-divider">|</div>
                <div class="top-info-item"><span class="info-highlight">666</span> fps</div>
                <div class="top-info-divider">|</div>
                <div class="top-info-item" id="current-time"></div>
            </div>
        </div>
    </div>
    
    <div class="container" id="draggable-container">
        <div class="drag-handle" id="drag-handle"></div>

        <!-- 一级菜单区域 -->
        <header>
            <div class="logo">FATALITY</div>
            <nav>
                <ul class="main-nav">
                    <li class="active"><a href="#" data-tab="rage" onclick="switchTab('rage')"><span
                                class="nav-icon">⦿</span> RAGE</a></li>
                    <li><a href="#" data-tab="legit" onclick="switchTab('legit')"><span class="nav-icon">◎</span>
                            LEGIT</a></li>
                    <li><a href="#" data-tab="visuals" onclick="switchTab('visuals')"><span class="nav-icon">👁️</span>
                            VISUALS</a></li>
                    <li><a href="#" data-tab="misc" onclick="switchTab('misc')"><span class="nav-icon">⚙️</span>
                            MISC</a></li>
                    <li><a href="#" data-tab="skins" onclick="switchTab('skins')"><span class="nav-icon">🎨</span>
                            SKINS</a></li>
                    <li><a href="#" data-tab="lua" onclick="switchTab('lua')"><span class="nav-icon">&lt;/&gt;</span>
                            LUA</a></li>
                </ul>
            </nav>
            <div class="user-info">
                <div class="user-info-container">
                    <div class="user-text-info">
                        <span class="username">fatality.win</span>
                        <span class="expires">expires: <span class="days">never</span></span>
                    </div>
                    <div class="avatar">
                        <img src="https://928777311-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/organizations%2FRc8lKzugjqovdk120qVl%2Fsites%2Fsite_dW5Sg%2Ficon%2FR4K8IVAKqKBik6Ct0U3w%2Fimage.avif?alt=media&token=cd45ac3f-9ef5-43a9-a9a3-4919ab291984"
                            alt="avatar" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                    </div>
                </div>
            </div>
        </header>

        <div class="content">
            <!-- 左侧边栏 - 菜单区域 -->
            <div class="sidebar">
                <!-- 侧边栏标签切换 - Aimbot/Anti-aim -->
                <div class="sidebar-tabs">
                    <div class="sidebar-tab active" data-sidebar="aimbot" onclick="switchSidebarTab('aimbot')"><span
                            class="sidebar-tab-text">Aimbot</span></div>
                    <div class="sidebar-tab" data-sidebar="anti-aim" onclick="switchSidebarTab('anti-aim')"><span
                            class="sidebar-tab-text">Anti-aim</span></div>
                </div>

                <!-- Aimbot菜单 - 二级菜单 -->
                <ul class="sub-menu aimbot-menu active" style="margin-top: 15px;">
                    <li class="sub-menu-item active" data-page="general">General</li>
                </ul>

                <!-- Anti-aim没有二级菜单，这里为空 -->
                <ul class="sub-menu anti-aim-menu" style="margin-top: 15px;"></ul>

                <div style="margin-top: auto; margin-bottom: 15px;">
                    <div class="add-button">+ Add</div>
                </div>
            </div>

            <!-- 主内容区域 -->
            <div class="page-content">
                <!-- Rage - General页面 -->
                <div class="page general-page active" id="rage-content">
                    <div class="panel weapon-panel">
                        <h2>WEAPON</h2>
                        <div class="option">
                            <span class="option-name tooltip">Hit-chance
                                <span class="tooltip-text">射击命中率<br>当预测的命中率达到指定的条件时才开枪<br>设置为Auto时会自动判断命中率进行射击</span>
                            </span>
                            <div class="slider-container" id="hit-chance-slider" data-min="-1" data-max="100"
                                data-value="100" data-suffix="%" data-special-value="-1:Auto">
                                <div class="slider-track">
                                    <div class="slider-fill" style="width: 100%"></div>
                                    <div class="slider-value">100%</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Pointscale
                                <span class="tooltip-text">多点缩放<br>针对选中的部位进行缩放<br>设置越高开枪越快但是命中率会降低</span>
                            </span>
                            <div class="slider-container" id="pointscale-slider" data-min="0" data-max="100"
                                data-value="100" data-suffix="%">
                                <div class="slider-track">
                                    <div class="slider-fill" style="width: 100%"></div>
                                    <div class="slider-value">100%</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Min-damage
                                <span
                                    class="tooltip-text">最小伤害<br>当有部位满足最小伤害时才会开枪<br>设置为Lethal时当有勾选的部位<br>满足一枪击杀时会自动击杀</span>
                            </span>
                            <div class="slider-container" id="min-damage-slider" data-min="0" data-max="125"
                                data-value="0" data-suffix=" hp" data-special-value="0:Lethal">
                                <div class="slider-track">
                                    <div class="slider-fill" style="width: 0%"></div>
                                    <div class="slider-value">Lethal</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Hitboxes
                                <span class="tooltip-text">射击部位<br>仅会对选中的部位进行射击</span>
                            </span>
                            <div class="dropdown" data-type="multi" id="hitboxes-dropdown">
                                <span class="dropdown-display">Head, Chest</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item selected" data-value="Head">Head</div>
                                    <div class="dropdown-item selected" data-value="Chest">Chest</div>
                                    <div class="dropdown-item" data-value="Stomach">Stomach</div>
                                    <div class="dropdown-item" data-value="Arms">Arms</div>
                                    <div class="dropdown-item" data-value="Legs">Legs</div>
                                    <div class="dropdown-item" data-value="Feet">Feet</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Multipoint
                                <span class="tooltip-text">多点部位<br>仅会对选中的部位进行缩放</span>
                            </span>
                            <div class="dropdown" data-type="multi" id="multipoint-dropdown">
                                <span class="dropdown-display">Head, Chest</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item selected" data-value="Head">Head</div>
                                    <div class="dropdown-item selected" data-value="Chest">Chest</div>
                                    <div class="dropdown-item" data-value="Stomach">Stomach</div>
                                    <div class="dropdown-item" data-value="Arms">Arms</div>
                                    <div class="dropdown-item" data-value="Legs">Legs</div>
                                    <div class="dropdown-item" data-value="Feet">Feet</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Target selection
                                <span
                                    class="tooltip-text">选择目标优先级<br>根据条件优先对满足条件的目标进行射击<br>Damage优先选择能造成最大伤害的目标<br>Crosshair选择离准星最近的目标<br>Hit-chance选择命中概率最高的目标</span>
                            </span>
                            <div class="dropdown" data-type="single" id="target-dropdown">
                                <span class="dropdown-display">Damage</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item active" data-value="Damage">Damage</div>
                                    <div class="dropdown-item" data-value="Crosshair">Crosshair</div>
                                    <div class="dropdown-item" data-value="Hit-chance">Hit-chance</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel extra-panel">
                        <h2>EXTRA</h2>
                        <div class="option">
                            <span class="option-name tooltip">Autostop
                                <span class="tooltip-text">自动急停<br>射击时自动停止移动以提高射击精度<br>当开启移除扩散时可以无视该设置</span>
                            </span>
                            <div class="settings-icon">⚙️</div>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Autoscope
                                <span class="tooltip-text">自动开镜<br>所有能开镜的武器都能自动开镜</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Ignore limbs on moving
                                <span class="tooltip-text">忽略移动中目标的四肢<br>专注于身体和头部,提高关键位置的命中率。</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Autorevolver
                                <span class="tooltip-text">自动左轮手枪<br>自动预热以提高开枪速度。</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                    </div>

                    <div class="panel general-panel">
                        <h2>GENERAL</h2>
                        <div class="option">
                            <span class="option-name tooltip orange">Aimbot
                                <span class="tooltip-text">暴力自瞄<br>这只是一个开关而已😂</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Silent aim
                                <span class="tooltip-text">静默自瞄<br>隐藏瞄准过程,在其他人视角里面无法察觉您瞄准的过程。</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Maximum fov
                                <span class="tooltip-text">静默自瞄<br>静默自瞄的最大范围<br><span
                                        style="color: #ff9c4a">超过5fov时有被Vaclive检测的风险</span></span>
                            </span>
                            <div class="slider-container" id="max-fov-slider" data-min="0" data-max="180"
                                data-value="180" data-suffix=" deg">
                                <div class="slider-track">
                                    <div class="slider-fill" style="width: 100%"></div>
                                    <div class="slider-value">180 deg</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Autofire
                                <span class="tooltip-text">自动开枪<br>当满足您所设置的条件时自动开枪</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Delay shot
                                <span class="tooltip-text">延迟射击<br>等待最佳时机射击而不是立即开火以提高命中率</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Duck peek assist
                                <span class="tooltip-text">蹲起PEEK<br>自动蹲起来找机会射击敌人</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Force bodyaim
                                <span class="tooltip-text">强制瞄准身体<br>当敌人的血量一枪能打死时推荐使用</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Force shoot
                                <span class="tooltip-text">强制射击<br>当您想强制射击目标而不管命中率如何非常有用</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Headshot only
                                <span class="tooltip-text">仅瞄准头部</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Knife bot
                                <span class="tooltip-text">当敌人在近距离时<br>自动使用刀具攻击敌人</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Zeus bot
                                <span class="tooltip-text">当敌人在电击枪范围时<br>自动使用电击枪攻击敌人</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Nospread
                                <span class="tooltip-text">完全移除武器扩散<br>可以在空中或是高速移动中开枪</span>
                            </span>
                            <div class="settings-icon">⚙️</div>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip orange">Doubletap
                                <span class="tooltip-text">一次连发两枪<br>快速秒杀敌人</span>
                            </span>
                            <div class="settings-icon">⚙️</div>
                            <div class="checkbox checked"></div>
                        </div>
                    </div>
                </div>

                <!-- Legit页面 -->
                <div class="page legit-page" id="legit-content" style="display: none; flex: 1;">
                    <!-- LEGIT侧边栏菜单 -->
                    <div class="sidebar legit-sidebar"
                        style="width: 140px; display: flex; flex-direction: column; padding-top: 5px; min-height: 600px; margin-right: 15px;">
                        <!-- LEGIT菜单 - 只有General选项 -->
                        <ul class="sub-menu active" style="display: block;">
                            <li class="sub-menu-item active" data-page="legit-general">General</li>
                        </ul>

                        <div style="margin-top: auto; margin-bottom: -30px;">
                            <div class="add-button">+ Add</div>
                        </div>
                    </div>

                    <!-- LEGIT内容区域 -->
                    <div class="legit-main-content"
                        style="flex: 1; display: flex; flex-wrap: wrap; gap: 15px; align-content: flex-start; margin-left: -30px;">
                        <!-- 左侧面板：AIM + RCS -->
                        <div class="legit-left-panels"
                            style="display: flex; flex-direction: column; width: calc(33.33% - 10px); gap: 15px;">
                            <!-- AIM面板 -->
                            <div class="panel aim-panel">
                                <h2>AIM</h2>
                                <div class="option">
                                    <span class="option-name tooltip">Aim assist
                                        <span class="tooltip-text">自瞄</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Mode
                                        <span class="tooltip-text">自瞄模式<br>Adaptive自适应<br>Lock锁定</span>
                                    </span>
                                    <div class="dropdown" data-type="single" id="legit-mode-dropdown">
                                        <span class="dropdown-display">Adaptive</span>
                                        <span class="arrow">▼</span>
                                        <div class="dropdown-menu">
                                            <div class="dropdown-item active" data-value="Adaptive">Adaptive</div>
                                            <div class="dropdown-item" data-value="Lock">Lock</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Hitboxes
                                        <span class="tooltip-text">瞄准部位<br>仅会对选中的部位自动瞄准</span>
                                    </span>
                                    <div class="dropdown" data-type="multi" id="legit-hitboxes-dropdown">
                                        <span class="dropdown-display">Head, Chest</span>
                                        <span class="arrow">▼</span>
                                        <div class="dropdown-menu">
                                            <div class="dropdown-item selected" data-value="Head">Head</div>
                                            <div class="dropdown-item selected" data-value="Chest">Chest</div>
                                            <div class="dropdown-item" data-value="Body">Body</div>
                                            <div class="dropdown-item" data-value="Pelvis">Pelvis</div>
                                            <div class="dropdown-item" data-value="Arms">Arms</div>
                                            <div class="dropdown-item" data-value="Legs">Legs</div>
                                            <div class="dropdown-item" data-value="Feet">Feet</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Multipoint
                                        <span class="tooltip-text">多点缩放<br>调时对面漏一点就会进行瞄准</span>
                                    </span>
                                    <div class="slider-container" id="legit-multipoint-slider" data-min="0"
                                        data-max="100" data-value="0" data-suffix="%" data-special-value="0:Off">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 0%"></div>
                                            <div class="slider-value">Off</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Aim fov
                                        <span class="tooltip-text">自瞄范围<br>只会在自瞄范围内进行瞄准</span>
                                    </span>
                                    <div class="slider-container" id="legit-aim-fov-slider" data-min="0.1"
                                        data-max="25.0" data-value="1.0" data-suffix=" deg">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 4%"></div>
                                            <div class="slider-value">1.0 deg</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Aim speed
                                        <span class="tooltip-text">自瞄速度<br>自瞄的速度,速度过快可能会被VAC检测</span>
                                    </span>
                                    <div class="slider-container" id="legit-aim-speed-slider" data-min="1"
                                        data-max="100" data-value="100" data-suffix="%">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 100%"></div>
                                            <div class="slider-value">100%</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Min-damage
                                        <span class="tooltip-text">最小伤害<br>Match trigger与自动扳机匹配</span>
                                    </span>
                                    <div class="slider-container" id="legit-min-damage-slider" data-min="0"
                                        data-max="100" data-value="0" data-suffix=" hp"
                                        data-special-value="0:Match trigger">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 0%"></div>
                                            <div class="slider-value">Match trigger</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Only in scope
                                        <span class="tooltip-text">仅在开镜时启用<br>只有开镜的时候才会进行自瞄</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Autostop
                                        <span class="tooltip-text">自动急停<br>射击时自动停止移动以提高射击精度</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                            </div>

                            <!-- RCS面板 -->
                            <div class="panel rcs-panel">
                                <h2>RCS</h2>
                                <div class="option">
                                    <span class="option-name tooltip">Recoil control
                                        <span class="tooltip-text">后座力控制<br>自动压枪的意思</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Speed
                                        <span class="tooltip-text">控制速度<br>压枪的速度</span>
                                    </span>
                                    <div class="slider-container" id="rcs-speed-slider" data-min="1" data-max="100"
                                        data-value="1" data-suffix="%">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 1%"></div>
                                            <div class="slider-value">1%</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Re-center
                                        <span class="tooltip-text">重新居中<br>压枪后自动恢复视角</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Start bullet
                                        <span class="tooltip-text">起始子弹<br>从第几发开始压枪</span>
                                    </span>
                                    <div class="slider-container" id="start-bullet-slider" data-min="1" data-max="5"
                                        data-value="1">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 1%"></div>
                                            <div class="slider-value">1</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 中间面板：TRIGGER + BACKTRACK -->
                        <div class="legit-middle-panels"
                            style="flex-direction: column; width: calc(33.33% - 10px); gap: 15px;">
                            <!-- TRIGGER面板 -->
                            <div class="panel trigger-panel">
                                <h2>TRIGGER</h2>
                                <div class="option">
                                    <span class="option-name tooltip">Triggerbot
                                        <span class="tooltip-text">自动扳机<br>自动开枪的意思</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Hit-chance
                                        <span class="tooltip-text">命中率<br>自动扳机开枪的命中率</span>
                                    </span>
                                    <div class="slider-container" id="trigger-hit-chance-slider" data-min="0"
                                        data-max="100" data-value="100" data-suffix="%" data-special-value="0:Auto">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 100%"></div>
                                            <div class="slider-value">100%</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Use seed when available
                                        <span class="tooltip-text">当有种子时使用<br>自动扳机开枪的种子</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Min-damage
                                        <span class="tooltip-text">最小伤害<br>自动扳机开枪的最小伤害</span>
                                    </span>
                                    <div class="slider-container" id="trigger-min-damage-slider" data-min="1"
                                        data-max="100" data-value="1" data-suffix=" hp">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 1%"></div>
                                            <div class="slider-value">1 hp</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Reaction time
                                        <span class="tooltip-text">反应时间<br>自动扳机开枪的反应时间</span>
                                    </span>
                                    <div class="slider-container" id="reaction-time-slider" data-min="0" data-max="300"
                                        data-value="10" data-suffix=" ms" data-special-value="0:Instant">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 3.33%"></div>
                                            <div class="slider-value">10 ms</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Wait for aim assist hitgroup
                                        <span class="tooltip-text">等待自瞄命中组<br>自动扳机开枪的等待时间</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Only in scope
                                        <span class="tooltip-text">仅在开镜时启用<br>只有开镜的时候才会进行自瞄</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                            </div>

                            <!-- BACKTRACK面板 -->
                            <div class="panel backtrack-panel" style="margin-top: 10px;">
                                <h2>BACKTRACK</h2>
                                <div class="option">
                                    <span class="option-name tooltip">Backtrack
                                        <span class="tooltip-text">回溯<br>如果你不知道什么意思建议搜一下</span>
                                    </span>
                                    <div class="slider-container" id="backtrack-slider" data-min="0" data-max="200"
                                        data-value="0" data-suffix=" ms" data-special-value="0:Off">
                                        <div class="slider-track">
                                            <div class="slider-fill" style="width: 0%"></div>
                                            <div class="slider-value">Off</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 右侧面板：GENERAL -->
                        <div class="legit-right-panels" style="flex-direction: column; width: calc(33.33% - 10px);">
                            <!-- GENERAL面板 -->
                            <div class="panel general-panel">
                                <h2>GENERAL</h2>
                                <div class="option">
                                    <span class="option-name tooltip">Enabled
                                        <span class="tooltip-text short">启用LEGIT</span>
                                    </span>
                                    <div class="checkbox checked"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Disablers
                                        <span class="tooltip-text">禁用LEGIT的条件<br>比如烟雾弹,闪光弹,空中等</span>
                                    </span>
                                    <div class="dropdown" data-type="multi" id="disablers-dropdown">
                                        <span class="dropdown-display">None</span>
                                        <span class="arrow">▼</span>
                                        <div class="dropdown-menu">
                                            <div class="dropdown-item" data-value="Smoked">Smoked</div>
                                            <div class="dropdown-item" data-value="Flashed">Flashed</div>
                                            <div class="dropdown-item" data-value="In air">In air</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Penetration
                                        <span class="tooltip-text">自动穿墙<br>是否允许穿墙</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Visualize fov
                                        <span class="tooltip-text">可视化自瞄范围<br>在屏幕上显示自瞄范围</span>
                                    </span>
                                    <div style="display: flex; align-items: center; gap: 4px;">
                                        <div class="color-option" style="background-color: #ff4a4a;"
                                            data-color="#ff4a4aff"></div>
                                        <div class="checkbox"></div>
                                    </div>
                                </div>
                                <div class="option">
                                    <span class="option-name tooltip">Autorevolver
                                        <span class="tooltip-text">自动左轮手枪<br>左轮手枪自动预热</span>
                                    </span>
                                    <div class="checkbox"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visuals页面 - 空白 -->
                <div class="page visuals-page" id="visuals-content"
                    style="display: none; flex: 1; justify-content: center; align-items: center;">
                    <div
                        style="text-align: center; color: #888; font-size: 20px; background-color: #181818; padding: 40px 60px; border-radius: 6px; border: 1px solid #222; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);">
                        <p>VISUALS页面尚未开发</p>
                        <p style="margin-top: 10px; font-size: 14px; color: #666;">Coming Soon</p>
                    </div>
                </div>

                <!-- Misc页面 - 空白 -->
                <div class="page misc-page" id="misc-content"
                    style="display: none; flex: 1; justify-content: center; align-items: center;">
                    <div
                        style="text-align: center; color: #888; font-size: 20px; background-color: #181818; padding: 40px 60px; border-radius: 6px; border: 1px solid #222; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);">
                        <p>MISC页面尚未开发</p>
                        <p style="margin-top: 10px; font-size: 14px; color: #666;">Coming Soon</p>
                    </div>
                </div>

                <!-- Skins页面 - 空白 -->
                <div class="page skins-page" id="skins-content"
                    style="display: none; flex: 1; justify-content: center; align-items: center;">
                    <div
                        style="text-align: center; color: #888; font-size: 20px; background-color: #181818; padding: 40px 60px; border-radius: 6px; border: 1px solid #222; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);">
                        <p>SKINS页面尚未开发</p>
                        <p style="margin-top: 10px; font-size: 14px; color: #666;">Coming Soon</p>
                    </div>
                </div>

                <!-- Lua页面 - 空白 -->
                <div class="page lua-page" id="lua-content"
                    style="display: none; flex: 1; justify-content: center; align-items: center;">
                    <div
                        style="text-align: center; color: #888; font-size: 20px; background-color: #181818; padding: 40px 60px; border-radius: 6px; border: 1px solid #222; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);">
                        <p>LUA页面尚未开发</p>
                        <p style="margin-top: 10px; font-size: 14px; color: #666;">Coming Soon</p>
                    </div>
                </div>

                <!-- Anti-aim页面 -->
                <div class="page anti-aim-page">
                    <div class="panel angles-panel" style="flex: none; width: 360px;">
                        <h2>ANGLES</h2>
                        <div class="option">
                            <span class="option-name tooltip orange">Anti-aim
                                <span class="tooltip-text">反自瞄功能，通过改变角度来使敌人难以命中你的头部</span>
                            </span>
                            <div class="checkbox checked"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Pitch
                                <span class="tooltip-text">人物视角<br>设置人物的视角方向</span>
                            </span>
                            <div class="settings-icon" style="display: none;">⚙️</div>
                            <div class="dropdown" data-type="single" id="pitch-dropdown">
                                <span class="dropdown-display">Custom</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item" data-value="None">None</div>
                                    <div class="dropdown-item" data-value="Down">Down</div>
                                    <div class="dropdown-item" data-value="Up">Up</div>
                                    <div class="dropdown-item" data-value="Zero">Zero</div>
                                    <div class="dropdown-item active" data-value="Custom">Custom</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Pitch jitter
                                <span class="tooltip-text">视角抖动<br>设置视角抖动的幅度大小</span>
                            </span>
                            <div class="settings-icon" style="display: none;">⚙️</div>
                            <div class="dropdown" data-type="single" id="pitch-jitter-dropdown">
                                <span class="dropdown-display">None</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item active" data-value="None">None</div>
                                    <div class="dropdown-item" data-value="Center">Center</div>
                                    <div class="dropdown-item" data-value="Offset">Offset</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Yaw base
                                <span class="tooltip-text">Yaw模式<br>Viewangles视角<br>根据视角方向<br>At
                                    target目标<br>始终朝向威胁最大的目标</span>
                            </span>
                            <div class="dropdown" data-type="single" id="yaw-base-dropdown">
                                <span class="dropdown-display">Viewangles</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item active" data-value="Viewangles">Viewangles</div>
                                    <div class="dropdown-item" data-value="At target">At target</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Yaw
                                <span class="tooltip-text">身体朝向<br>设置身体的朝向方向</span>
                            </span>
                            <div class="settings-icon" style="display: none;">⚙️</div>
                            <div class="dropdown" data-type="single" id="yaw-dropdown">
                                <span class="dropdown-display">Custom</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item" data-value="None">None</div>
                                    <div class="dropdown-item" data-value="Backwards">Backwards</div>
                                    <div class="dropdown-item active" data-value="Custom">Custom</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Yaw jitter
                                <span class="tooltip-text">身体抖动<br>设置身体抖动的幅度大小</span>
                            </span>
                            <div class="settings-icon" style="display: none;">⚙️</div>
                            <div class="dropdown" data-type="single" id="yaw-jitter-dropdown">
                                <span class="dropdown-display">None</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item active" data-value="None">None</div>
                                    <div class="dropdown-item" data-value="Center">Center</div>
                                    <div class="dropdown-item" data-value="Offset">Offset</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Jitter disabler
                                <span class="tooltip-text">抖动禁用<br>在特定条件下禁用抖动功能</span>
                            </span>
                            <div class="dropdown" data-type="multi" id="jitter-disabler-dropdown">
                                <span class="dropdown-display">None</span>
                                <span class="arrow">▼</span>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item" data-value="Yaw change">Yaw change</div>
                                    <div class="dropdown-item" data-value="Angle override">Angle override</div>
                                </div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip orange">Hide shot
                                <span
                                    class="tooltip-text">隐藏射击<br>也可以叫不抬头<br>本质上就是在射击时不抬头<br>可以防止敌人抓你抬头的时机<br>并不是开了不抬头就没有头了
                                    😂</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Spin
                                <span class="tooltip-text">视角旋转<br>大陀螺!!!</span>
                            </span>
                            <div class="slider-container" id="spin-slider" data-min="0" data-max="180" data-value="180"
                                data-suffix="%">
                                <div class="slider-track">
                                    <div class="slider-fill" style="width: 100%"></div>
                                    <div class="slider-value">180%</div>
                                </div>
                            </div>
                            <div class="checkbox checked" style="margin-left: 10px;"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Mouse override
                                <span class="tooltip-text">允许鼠标移动覆盖反自瞄设置</span>
                            </span>
                            <div class="settings-icon">⚙️</div>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <div id="red-color" class="color-option" style="background-color: #ff4a4a;"
                                    data-color="#ff4a4aff"></div>
                                <div id="green-color" class="color-option" style="background-color: #4aff4a;"
                                    data-color="#4aff4aff"></div>
                                <div class="checkbox checked" style="margin-left: 6px;"></div>
                            </div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Override left
                                <span class="tooltip-text">左藏头<br>覆盖身体朝向为左</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Override right
                                <span class="tooltip-text">右藏头<br>覆盖身体朝向为右</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Override back
                                <span class="tooltip-text">背身<br>覆盖身体朝向为后</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                        <div class="option">
                            <span class="option-name tooltip">Override forward
                                <span class="tooltip-text">正身<br>覆盖身体朝向为前</span>
                            </span>
                            <div class="checkbox"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-icons">
                <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path
                            d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                    </svg>
                </span>
                <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path
                            d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9l-7-7zm1 15H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" />
                    </svg>
                </span>
                <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path
                            d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" />
                    </svg>
                </span>
            </div>
            <div class="info-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                </svg>
            </div>
        </footer>
    </div>

    <!-- 设置面板遮罩层 -->
    <div class="settings-panel-overlay" id="settings-overlay"></div>

    <!-- Autostop设置面板 -->
    <div class="settings-panel" id="autostop-panel">
        <div class="settings-panel-title">Autostop</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Mode
                <span class="tooltip-text">急停条件<br>Full stop完全停止移动<br>Between shots在射击间隔停止<br>Early提前停止<br>Only when
                    lethal仅在可致命时停止<br>In air在空中时停止</span>
            </span>
            <div class="dropdown" data-type="multi" id="autostop-mode-dropdown">
                <span class="dropdown-display">Full stop, Early</span>
                <span class="arrow">▼</span>
                <div class="dropdown-menu">
                    <div class="dropdown-item selected" data-value="Full stop">Full stop</div>
                    <div class="dropdown-item" data-value="Between shots">Between shots</div>
                    <div class="dropdown-item selected" data-value="Early">Early</div>
                    <div class="dropdown-item" data-value="Only when lethal">Only when lethal</div>
                    <div class="dropdown-item" data-value="In air">In air</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Nospread设置面板 -->
    <div class="settings-panel" id="nospread-panel">
        <div class="settings-panel-title">Nospread</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Force
                <span class="tooltip-text">强制移除武器扩散<br>在非常情况下会被VAC标记为可疑射击<br>当标记超过十次将会移除扩散预测种子</span>
            </span>
            <div class="checkbox checked"></div>
        </div>
    </div>

    <!-- Doubletap设置面板 -->
    <div class="settings-panel" id="doubletap-panel">
        <div class="settings-panel-title">Doubletap</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">On manual shot
                <span class="tooltip-text">手动模式<br>在手动模式开火的情况下也会触发Doubletap</span>
            </span>
            <div class="checkbox checked"></div>
        </div>
    </div>

    <!-- Pitch Custom 设置面板 -->
    <div class="settings-panel" id="pitch-custom-panel">
        <div class="settings-panel-title">Pitch</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Angle
                <span class="tooltip-text">人物视角<br>设置人物的视角范围-89到89度</span>
            </span>
            <div class="slider-container" id="pitch-angle-slider" data-min="-89" data-max="89" data-value="0"
                data-suffix=" deg">
                <div class="slider-track">
                    <div class="slider-fill" style="width: 50%"></div>
                    <div class="slider-value">0 deg</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pitch Jitter 设置面板 -->
    <div class="settings-panel" id="pitch-jitter-panel">
        <div class="settings-panel-title">Pitch Jitter</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Amount
                <span class="tooltip-text">视角抖动<br>设置视角抖动的幅度大小</span>
            </span>
            <div class="slider-container" id="pitch-jitter-amount-slider" data-min="0" data-max="180" data-value="30"
                data-suffix=" deg">
                <div class="slider-track">
                    <div class="slider-fill" style="width: 16.7%"></div>
                    <div class="slider-value">30 deg</div>
                </div>
            </div>
        </div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">3-way
                <span class="tooltip-text">三段抖动<br>使用三段抖动</span>
            </span>
            <div class="checkbox"></div>
        </div>
    </div>

    <!-- Yaw Custom 设置面板 -->
    <div class="settings-panel" id="yaw-custom-panel">
        <div class="settings-panel-title">Yaw</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Angle
                <span class="tooltip-text">身体朝向<br>设置的朝向角度-180到180度</span>
            </span>
            <div class="slider-container" id="yaw-angle-slider" data-min="-180" data-max="180" data-value="0"
                data-suffix=" deg">
                <div class="slider-track">
                    <div class="slider-fill" style="width: 50%"></div>
                    <div class="slider-value">0 deg</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Yaw Jitter 设置面板 -->
    <div class="settings-panel" id="yaw-jitter-panel">
        <div class="settings-panel-title">Yaw Jitter</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Amount
                <span class="tooltip-text">身体抖动<br>设置身体抖动的幅度大小</span>
            </span>
            <div class="slider-container" id="yaw-jitter-amount-slider" data-min="-180" data-max="180" data-value="30"
                data-suffix=" deg">
                <div class="slider-track">
                    <div class="slider-fill" style="width: 58.3%"></div>
                    <div class="slider-value">30 deg</div>
                </div>
            </div>
        </div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">3-way
                <span class="tooltip-text">三段抖动<br>使用三段抖动</span>
            </span>
            <div class="checkbox"></div>
        </div>
    </div>

    <!-- Mouse Override 设置面板 -->
    <div class="settings-panel" id="mouse-override-panel">
        <div class="settings-panel-title">Mouse Override</div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Sensitivity
                <span class="tooltip-text">覆盖YAW<br>使用鼠标来控制YAW</span>
            </span>
            <div class="slider-container" id="mouse-override-sensitivity-slider" data-min="1" data-max="200"
                data-value="100" data-suffix="%">
                <div class="slider-track">
                    <div class="slider-fill" style="width: 50%"></div>
                    <div class="slider-value">100%</div>
                </div>
            </div>
        </div>
        <div class="settings-option">
            <span class="settings-option-name tooltip">Always show
                <span class="tooltip-text">可视化<br>在鼠标移动时始终显示鼠标覆盖图标</span>
            </span>
            <div class="checkbox checked"></div>
        </div>
    </div>

    <!-- 颜色选择器组件 -->
    <div class="color-picker-container" id="color-picker" style="display: none;">
        <div class="color-selector">
            <div class="color-gradient">
                <div class="saturation-overlay"></div>
                <div class="color-picker-cursor" id="color-cursor"></div>
            </div>
            <div class="color-slider" id="hue-slider">
                <div class="color-slider-cursor" id="hue-cursor"></div>
            </div>
        </div>
        <!-- 删除单独的颜色预览区域 -->
        <!-- 修改透明度滑块，添加滑块指示器 -->
        <div class="opacity-slider-container" id="opacity-slider">
            <div class="opacity-slider-fill" id="opacity-fill"></div>
            <div class="opacity-slider-thumb" id="opacity-thumb"></div>
        </div>
        <div class="color-picker-actions">
            <div class="color-action-icon" id="copy-color">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="20" height="20">
                    <path
                        d="M16 1H4C2.9 1 2 1.9 2 3v14h2V3h12V1zm3 4H8C6.9 5 6 5.9 6 7v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                </svg>
                <span class="tooltip-text">Copy</span>
            </div>
            <div class="color-action-icon" id="paste-color">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="20" height="20">
                    <path
                        d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" />
                </svg>
                <span class="tooltip-text">Paste</span>
            </div>
            <input type="text" class="color-value" id="color-value" value="#00ff00ff" readonly>
        </div>
    </div>

    <script>
        // 添加显示当前时间的函数
        function updateCurrentTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            document.getElementById('current-time').textContent = `${hours}:${minutes}:${seconds}`;
        }
        
        // 页面加载后立即更新时间
        updateCurrentTime();
        
        // 每秒更新一次时间
        setInterval(updateCurrentTime, 1000);
    
        // 菜单切换函数
        function switchTab(tabId) {
            // 移除所有菜单项的激活状态
            document.querySelectorAll('.main-nav li').forEach(item => {
                item.classList.remove('active');
            });

            // 激活当前点击的菜单项
            document.querySelector(`.main-nav li a[data-tab="${tabId}"]`).parentElement.classList.add('active');

            // 隐藏所有页面
            document.querySelectorAll('.page-content .page').forEach(page => {
                page.classList.remove('active');
                page.style.display = 'none';
            });

            // 显示对应页面
            if (tabId === 'rage') {
                const ragePage = document.getElementById('rage-content');
                if (ragePage) {
                    ragePage.classList.add('active');
                    ragePage.style.display = 'flex';
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar) sidebar.style.display = 'flex'; // 显示侧边栏
                }
            } else if (tabId === 'legit') {
                const legitPage = document.getElementById('legit-content');
                if (legitPage) {
                    legitPage.classList.add('active');
                    legitPage.style.display = 'flex';
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                }
            } else if (tabId === 'visuals') {
                const visualsPage = document.getElementById('visuals-content');
                if (visualsPage) {
                    visualsPage.classList.add('active');
                    visualsPage.style.display = 'flex';
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                }
            } else if (tabId === 'misc') {
                const miscPage = document.getElementById('misc-content');
                if (miscPage) {
                    miscPage.classList.add('active');
                    miscPage.style.display = 'flex';
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                }
            } else if (tabId === 'skins') {
                const skinsPage = document.getElementById('skins-content');
                if (skinsPage) {
                    skinsPage.classList.add('active');
                    skinsPage.style.display = 'flex';
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                }
            } else if (tabId === 'lua') {
                const luaPage = document.getElementById('lua-content');
                if (luaPage) {
                    luaPage.classList.add('active');
                    luaPage.style.display = 'flex';
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                }
            }

            console.log('切换到页面: ' + tabId);
        }

        // 侧边栏标签切换函数
        function switchSidebarTab(sidebarType) {
            // 移除所有标签的active类
            document.querySelectorAll('.sidebar-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // 给当前点击的标签添加active类
            document.querySelector(`.sidebar-tab[data-sidebar="${sidebarType}"]`).classList.add('active');

            // 如果是anti-aim，添加对应的类到body
            if (sidebarType === 'anti-aim') {
                document.body.classList.add('show-anti-aim');

                // 显示anti-aim页面
                document.querySelectorAll('.page').forEach(page => {
                    if (page.classList.contains('anti-aim-page')) {
                        page.classList.add('active');
                        page.style.display = 'flex';
                    } else {
                        page.classList.remove('active');
                        page.style.display = 'none';
                    }
                });
            } else {
                document.body.classList.remove('show-anti-aim');

                // 显示general页面
                document.querySelectorAll('.page').forEach(page => {
                    if (page.classList.contains('general-page')) {
                        page.classList.add('active');
                        page.style.display = 'flex';
                    } else {
                        page.classList.remove('active');
                        page.style.display = 'none';
                    }
                });
            }

            // 隐藏所有二级菜单
            document.querySelectorAll('.sub-menu').forEach(menu => {
                menu.classList.remove('active');
            });

            // 显示对应的二级菜单
            const targetMenu = document.querySelector(`.${sidebarType}-menu`);
            if (targetMenu) {
                targetMenu.classList.add('active');
            }

            console.log('切换侧边栏标签: ' + sidebarType);
        }

        document.addEventListener('DOMContentLoaded', function () {
            // 检查当前活动页面并设置相应的body类
            const legitPage = document.querySelector('.legit-page.active');
            if (legitPage) {
                document.body.classList.add('show-legit');
            }

            // 初始化滑块和复选框
            initializeAllSliders();
            initializeAllCheckboxes();

            // 初始化下拉菜单
            initializeAllDropdowns();

            // 初始化顶部菜单切换功能
            initTopNavigation();

            // 初始化侧边栏标签
            handleSidebarTabs();

            // 检查是否已经有激活的标签，如果没有，默认激活第一个
            if (!document.querySelector('.sidebar-tab.active')) {
                document.querySelector('.sidebar-tab').classList.add('active');
            }

            // 检查激活的标签是哪个，应用相应的类
            if (document.querySelector('.sidebar-tab[data-sidebar="anti-aim"]').classList.contains('active')) {
                document.body.classList.add('show-anti-aim');
            }

            // 一级菜单切换功能
            const mainNavLinks = document.querySelectorAll('.main-nav li a');
            const contentPages = document.querySelectorAll('.page-content .page');

            mainNavLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation(); // 阻止事件冒泡

                    console.log('点击菜单项: ' + this.getAttribute('data-tab'));

                    try {
                        // 移除所有菜单项的激活状态
                        mainNavLinks.forEach(item => {
                            item.parentElement.classList.remove('active');
                        });

                        // 激活当前点击的菜单项
                        this.parentElement.classList.add('active');

                        // 获取对应的标签页ID
                        const tabId = this.getAttribute('data-tab');

                        // 隐藏所有页面
                        contentPages.forEach(page => {
                            page.classList.remove('active');
                            page.style.display = 'none';
                        });

                        // 显示对应页面
                        if (tabId === 'rage') {
                            const ragePage = document.getElementById('rage-content');
                            if (ragePage) {
                                ragePage.classList.add('active');
                                ragePage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'flex'; // 显示侧边栏

                                console.log('切换回RAGE菜单，当前保存的菜单状态:', lastRageSubmenu);

                                // 使用保存的RAGE状态
                                document.querySelectorAll('.sidebar-tab').forEach(tab => {
                                    tab.classList.remove('active');
                                });

                                const targetTab = document.querySelector(`.sidebar-tab[data-sidebar="${lastRageSubmenu}"]`);
                                if (targetTab) {
                                    console.log('找到目标标签:', targetTab);
                                    targetTab.classList.add('active');
                                } else {
                                    console.error('未找到目标标签:', lastRageSubmenu);
                                }

                                // 根据保存的状态设置页面
                                if (lastRageSubmenu === 'anti-aim') {
                                    console.log('显示Anti-aim页面');
                                    // 显示anti-aim相关内容
                                    document.body.classList.add('show-anti-aim');
                                    document.querySelectorAll('.page').forEach(page => {
                                        page.classList.remove('active');
                                        if (page.classList.contains('anti-aim-page')) {
                                            page.classList.add('active');
                                            page.style.display = 'flex';
                                        } else {
                                            page.style.display = 'none';
                                        }
                                    });
                                } else {
                                    console.log('显示Aimbot页面');
                                    // 显示aimbot相关内容
                                    document.body.classList.remove('show-anti-aim');
                                    document.querySelectorAll('.page').forEach(page => {
                                        page.classList.remove('active');
                                        if (page.classList.contains('general-page')) {
                                            page.classList.add('active');
                                            page.style.display = 'flex';
                                        } else {
                                            page.style.display = 'none';
                                        }
                                    });
                                }
                            }
                        } else if (tabId === 'legit') {
                            const legitPage = document.getElementById('legit-content');
                            if (legitPage) {
                                legitPage.classList.add('active');
                                legitPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'visuals') {
                            const visualsPage = document.getElementById('visuals-content');
                            if (visualsPage) {
                                visualsPage.classList.add('active');
                                visualsPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'misc') {
                            const miscPage = document.getElementById('misc-content');
                            if (miscPage) {
                                miscPage.classList.add('active');
                                miscPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'skins') {
                            const skinsPage = document.getElementById('skins-content');
                            if (skinsPage) {
                                skinsPage.classList.add('active');
                                skinsPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'lua') {
                            const luaPage = document.getElementById('lua-content');
                            if (luaPage) {
                                luaPage.classList.add('active');
                                luaPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        }

                        // 输出调试信息
                        console.log('切换到页面: ' + tabId);
                    } catch (error) {
                        console.error('菜单切换出错: ', error);
                    }
                });
            });

            // 侧边栏标签切换功能
            function handleSidebarTabs() {
                const sidebarTabs = document.querySelectorAll('.sidebar-tab');

                // 先移除所有现有的事件监听器
                sidebarTabs.forEach(tab => {
                    const newTab = tab.cloneNode(true);
                    tab.parentNode.replaceChild(newTab, tab);
                });

                // 重新获取替换后的标签
                const updatedTabs = document.querySelectorAll('.sidebar-tab');

                updatedTabs.forEach(tab => {
                    tab.addEventListener('click', function () {
                        // 移除所有标签的active类
                        updatedTabs.forEach(t => t.classList.remove('active'));

                        // 给当前点击的标签添加active类
                        this.classList.add('active');

                        // 获取侧边栏类型
                        const sidebarType = this.getAttribute('data-sidebar');

                        // 如果是anti-aim，添加对应的类到body
                        if (sidebarType === 'anti-aim') {
                            document.body.classList.add('show-anti-aim');

                            // 显示anti-aim页面
                            document.querySelectorAll('.page').forEach(page => {
                                if (page.classList.contains('anti-aim-page')) {
                                    page.classList.add('active');
                                    page.style.display = 'flex';
                                } else {
                                    page.classList.remove('active');
                                    page.style.display = 'none';
                                }
                            });
                        } else {
                            document.body.classList.remove('show-anti-aim');

                            // 显示general页面
                            document.querySelectorAll('.page').forEach(page => {
                                if (page.classList.contains('general-page')) {
                                    page.classList.add('active');
                                    page.style.display = 'flex';
                                } else {
                                    page.classList.remove('active');
                                    page.style.display = 'none';
                                }
                            });
                        }

                        // 隐藏所有二级菜单
                        document.querySelectorAll('.sub-menu').forEach(menu => {
                            menu.classList.remove('active');
                        });

                        // 显示对应的二级菜单
                        const targetMenu = document.querySelector(`.${sidebarType}-menu`);
                        if (targetMenu) {
                            targetMenu.classList.add('active');
                        }

                        console.log('切换侧边栏标签: ' + sidebarType);
                    });
                });
            }

            // 初始化侧边栏标签
            handleSidebarTabs();

            // 初始化颜色选择器相关按钮
            const pasteColorBtn = document.getElementById('paste-color');
            const copyColorBtn = document.getElementById('copy-color');

            if (pasteColorBtn) {
                pasteColorBtn.addEventListener('click', function (e) {
                    e.stopPropagation();

                    // 关闭所有下拉菜单
                    closeAllOpenDropdowns();

                    // 从剪贴板读取
                    navigator.clipboard.readText()
                        .then(text => {
                            // 验证粘贴的文本是否是有效的颜色格式
                            if (/^#([0-9A-F]{6}|[0-9A-F]{8})$/i.test(text)) {
                                setColorFromHex(text);
                                // 视觉反馈
                                this.style.opacity = '1';
                                setTimeout(() => {
                                    this.style.opacity = '0.7';
                                }, 300);
                            }
                        })
                        .catch(err => {
                            console.error('无法粘贴颜色: ', err);
                        });
                });
            }

            // 全局点击处理 - 优先处理，放在代码开头
            // 关闭所有下拉菜单的函数
            function closeAllDropdowns(e) {
                // 检查点击的不是当前打开的下拉菜单内的元素
                if (!e.target.closest('.dropdown.active')) {
                    closeAllOpenDropdowns();
                }
            }

            // 通用的关闭所有下拉菜单的函数
            function closeAllOpenDropdowns() {
                const allDropdowns = document.querySelectorAll('.dropdown');
                allDropdowns.forEach(dropdown => {
                    dropdown.classList.remove('active');
                    const arrow = dropdown.querySelector('.arrow');
                    if (arrow) arrow.textContent = '▼';
                });
                console.log('已关闭所有下拉菜单');
            }

            // 关闭颜色选择器的函数
            function closeColorPicker() {
                const colorPicker = document.getElementById('color-picker');
                const overlay = document.getElementById('settings-overlay');
                if (colorPicker) {
                    colorPicker.style.display = 'none';
                }
                if (overlay) {
                    overlay.classList.remove('active');
                }
            }

            // 添加全局点击事件监听
            document.addEventListener('click', function (e) {
                // 如果点击的不是下拉菜单或其子元素，关闭所有下拉菜单
                if (!e.target.closest('.dropdown')) {
                    // 获取所有下拉菜单并关闭它们
                    const allDropdowns = document.querySelectorAll('.dropdown');
                    allDropdowns.forEach(dropdown => {
                        dropdown.classList.remove('active');
                        const arrow = dropdown.querySelector('.arrow');
                        if (arrow) arrow.textContent = '▼';
                    });
                    console.log('通过全局点击关闭所有下拉菜单');
                }

                // 注意：颜色选择器的关闭逻辑已经在颜色选择器初始化中处理
            });

            // 设置面板功能
            const settingsPanels = document.querySelectorAll('.settings-panel');
            const overlay = document.getElementById('settings-overlay');

            // 关闭所有设置面板
            function closeAllPanels() {
                settingsPanels.forEach(panel => {
                    panel.classList.remove('active');
                });
                overlay.classList.remove('active');

                // 同时关闭颜色选择器面板
                closeColorPicker();
            }

            // 点击遮罩层关闭所有面板
            overlay.addEventListener('click', closeAllPanels);

            // 全局点击处理，关闭打开的面板和颜色选择器
            document.addEventListener('click', function (e) {
                // 如果点击的不是设置面板内的元素，也不是设置图标，也不是颜色选择器相关元素
                const isColorPickerClick = e.target.closest('#color-picker') ||
                    e.target.closest('.color-gradient') ||
                    e.target.closest('.color-slider') ||
                    e.target.closest('.hue-slider') ||
                    e.target.closest('#hue-slider') ||
                    e.target.closest('#opacity-slider') ||
                    e.target.closest('.opacity-slider') ||
                    e.target.closest('.opacity-slider-container') ||
                    e.target.closest('.color-picker-actions') ||
                    e.target.closest('#color-cursor') ||
                    e.target.closest('#hue-cursor') ||
                    e.target.closest('#opacity-thumb') ||
                    e.target.closest('#color-value') ||
                    e.target.closest('#copy-color') ||
                    e.target.closest('#paste-color') ||
                    e.target.closest('.color-option');

                if (!e.target.closest('.settings-panel') &&
                    !e.target.closest('.settings-icon') &&
                    !isColorPickerClick) {
                    closeAllPanels();
                }

                // 移除这里的颜色选择器关闭代码，因为已经在另一个全局点击事件中处理了
            });

            // 拖动功能实现
            const container = document.getElementById('draggable-container');
            const dragHandle = document.getElementById('drag-handle');

            let isDragging = false;
            let offsetX, offsetY;

            // 拖动开始
            dragHandle.addEventListener('mousedown', function (e) {
                isDragging = true;
                offsetX = e.clientX - container.getBoundingClientRect().left;
                offsetY = e.clientY - container.getBoundingClientRect().top;
                container.style.cursor = 'move';
            });

            // 拖动过程
            document.addEventListener('mousemove', function (e) {
                if (!isDragging) return;

                const x = e.clientX - offsetX;
                const y = e.clientY - offsetY;

                // 确保不会拖出视口
                const maxX = window.innerWidth - container.offsetWidth;
                const maxY = window.innerHeight - container.offsetHeight;

                container.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
                container.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
            });

            // 拖动结束
            document.addEventListener('mouseup', function () {
                isDragging = false;
                container.style.cursor = 'default';
            });

            // 一级菜单切换
            const mainNavItems = document.querySelectorAll('.main-nav li a');
            mainNavItems.forEach(item => {
                item.addEventListener('click', function (e) {
                    e.preventDefault();
                    mainNavItems.forEach(nav => nav.parentElement.classList.remove('active'));
                    this.parentElement.classList.add('active');
                });
            });

            // 二级菜单切换
            const subMenuItems = document.querySelectorAll('.sub-menu-item');

            // 全局变量，记住RAGE菜单的状态
            let lastRageSubmenu = localStorage.getItem('lastRageSubmenu') || 'aimbot';

            // 侧边栏标签切换 (Aimbot/Anti-aim)
            const sidebarTabs = document.querySelectorAll('.sidebar-tab');
            const subMenus = document.querySelectorAll('.sub-menu');
            const pages = document.querySelectorAll('.page');

            sidebarTabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    // 关闭所有下拉菜单
                    closeAllOpenDropdowns();

                    // 切换标签激活状态
                    sidebarTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');

                    // 获取标签类型
                    const sidebarType = this.getAttribute('data-sidebar');

                    // 保存RAGE菜单状态到全局变量和localStorage
                    lastRageSubmenu = sidebarType;
                    localStorage.setItem('lastRageSubmenu', sidebarType);
                    console.log('保存RAGE菜单状态:', lastRageSubmenu);

                    // 切换子菜单显示
                    subMenus.forEach(menu => {
                        menu.classList.remove('active');
                        if (menu.classList.contains(sidebarType + '-menu')) {
                            menu.classList.add('active');
                        }
                    });

                    // 显示对应内容页面
                    if (sidebarType === 'aimbot') {
                        pages.forEach(page => page.classList.remove('active'));
                        document.querySelector('.general-page').classList.add('active');
                        // 移除anti-aim类
                        document.body.classList.remove('show-anti-aim');
                    } else if (sidebarType === 'anti-aim') {
                        pages.forEach(page => page.classList.remove('active'));
                        document.querySelector('.anti-aim-page').classList.add('active');
                        // 添加anti-aim类
                        document.body.classList.add('show-anti-aim');
                    }
                });
            });

            // 二级菜单切换
            subMenuItems.forEach(item => {
                item.addEventListener('click', function () {
                    // 只在Aimbot菜单中切换
                    if (!document.querySelector('.sidebar-tab[data-sidebar="aimbot"]').classList.contains('active')) {
                        return;
                    }

                    // 切换激活项
                    subMenuItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // 页面加载完成后初始化所有交互元素
            window.addEventListener('load', function () {
                // 先初始化复选框，避免事件冲突
                initializeAllCheckboxes();

                // 然后初始化下拉菜单
                initializeAllDropdowns();

                // 初始化滑块
                initializeAllSliders();

                // 初始化齿轮图标
                initializeSettingsIcons();

                // 初始化Anti-aim控制逻辑
                initializeAntiAimControls();

                // 最后居中显示容器
                centerContainer();

                // 颜色选择器功能
                initializeColorPicker();

                // 顶部导航功能
                initTopNavigation();

                // 初始化应用保存的RAGE菜单状态
                const savedRageSubmenu = localStorage.getItem('lastRageSubmenu') || 'aimbot';
                if (document.querySelector('.main-nav li.active a').getAttribute('data-tab') === 'rage') {
                    // 如果当前在RAGE页面，应用保存的状态
                    document.querySelectorAll('.sidebar-tab').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    const targetTab = document.querySelector(`.sidebar-tab[data-sidebar="${savedRageSubmenu}"]`);
                    if (targetTab) {
                        targetTab.click(); // 触发点击事件应用所有相关状态
                    }
                }
            });

            // 初始化所有复选框的函数
            function initializeAllCheckboxes() {
                // 移除所有复选框上的现有事件监听器
                const allCheckboxes = document.querySelectorAll('.checkbox');
                allCheckboxes.forEach(checkbox => {
                    // 克隆并替换元素，以移除所有事件监听器
                    const newCheckbox = checkbox.cloneNode(true);
                    checkbox.parentNode.replaceChild(newCheckbox, checkbox);

                    // 添加新的点击事件监听器
                    newCheckbox.addEventListener('click', function (e) {
                        e.stopPropagation();
                        this.classList.toggle('checked');

                        // 点击复选框时关闭所有下拉菜单
                        closeAllOpenDropdowns();
                    });
                });

                console.log('所有复选框已重新初始化，共 ' + allCheckboxes.length + ' 个');
            }

            // 初始化所有下拉菜单的函数
            function initializeAllDropdowns() {
                const allDropdowns = document.querySelectorAll('.dropdown');
                console.log('初始化下拉菜单...');

                // 清除所有现有的事件监听器
                allDropdowns.forEach(dropdown => {
                    const newDropdown = dropdown.cloneNode(true);
                    dropdown.parentNode.replaceChild(newDropdown, dropdown);
                });

                // 重新获取替换后的元素
                const updatedDropdowns = document.querySelectorAll('.dropdown');

                // 为每个下拉菜单添加点击事件
                updatedDropdowns.forEach(dropdown => {
                    dropdown.addEventListener('click', function (event) {
                        // 阻止事件冒泡
                        event.stopPropagation();

                        // 检查是否是从项目点击冒泡上来的事件
                        if (event.target.closest('.dropdown-item')) {
                            return; // 如果是从下拉项目冒泡上来的事件，不处理
                        }

                        console.log('点击下拉菜单:', this.id || '无ID');

                        // 获取当前状态
                        const isCurrentlyActive = this.classList.contains('active');

                        // 关闭所有下拉菜单
                        updatedDropdowns.forEach(d => {
                            d.classList.remove('active');
                            const arrow = d.querySelector('.arrow');
                            if (arrow) arrow.textContent = '▼';
                        });

                        // 如果当前菜单之前不是活动状态，则激活它
                        if (!isCurrentlyActive) {
                            this.classList.add('active');
                            const arrow = this.querySelector('.arrow');
                            if (arrow) arrow.textContent = '▲';
                            console.log('下拉菜单已激活:', this.id || '无ID');
                        } else {
                            console.log('下拉菜单已关闭:', this.id || '无ID');
                        }
                    });

                    // 单独处理下拉菜单中的选项点击事件
                    const menuItems = dropdown.querySelectorAll('.dropdown-item');
                    const type = dropdown.getAttribute('data-type');
                    const displaySpan = dropdown.querySelector('.dropdown-display');

                    menuItems.forEach(item => {
                        item.addEventListener('click', function (event) {
                            // 阻止冒泡，这样不会触发父级下拉菜单的点击事件
                            event.stopPropagation();

                            if (type === 'single') {
                                // 单选模式逻辑
                                menuItems.forEach(i => i.classList.remove('active'));
                                this.classList.add('active');
                                displaySpan.textContent = this.getAttribute('data-value');

                                // 关闭下拉菜单
                                dropdown.classList.remove('active');
                                const arrow = dropdown.querySelector('.arrow');
                                if (arrow) arrow.textContent = '▼';
                                console.log('单选项已选择，下拉菜单已关闭');
                            } else if (type === 'multi') {
                                // 多选模式逻辑
                                this.classList.toggle('selected');

                                // 更新显示文本
                                const selectedItems = Array.from(dropdown.querySelectorAll('.dropdown-item.selected'))
                                    .map(i => i.getAttribute('data-value'));

                                if (selectedItems.length > 0) {
                                    if (selectedItems.length <= 2) {
                                        displaySpan.textContent = selectedItems.join(', ');
                                    } else {
                                        displaySpan.textContent = selectedItems.slice(0, 2).join(', ') + '...';
                                    }
                                } else {
                                    displaySpan.textContent = 'None';
                                }
                                console.log('多选项已更新:', selectedItems);
                                // 多选模式不关闭下拉菜单
                            }
                        });
                    });
                });

                console.log('所有下拉菜单已初始化，共', updatedDropdowns.length, '个');
            }

            // 初始化所有滑块的函数
            function initializeAllSliders() {
                const allSliders = document.querySelectorAll('.slider-container');

                allSliders.forEach(slider => {
                    const track = slider.querySelector('.slider-track');
                    const fill = slider.querySelector('.slider-fill');
                    const valueDisplay = slider.querySelector('.slider-value');
                    const sliderId = slider.id; // 获取滑块ID以便特殊处理

                    // 获取滑块属性
                    const min = parseInt(slider.getAttribute('data-min'));
                    const max = parseInt(slider.getAttribute('data-max'));
                    const suffix = slider.getAttribute('data-suffix') || '';
                    const specialValue = slider.getAttribute('data-special-value');
                    let value = parseInt(slider.getAttribute('data-value'));

                    // 解析特殊值（例如 "-1:Auto"）
                    let specialValueMap = {};
                    if (specialValue) {
                        const parts = specialValue.split(':');
                        if (parts.length === 2) {
                            specialValueMap[parts[0]] = parts[1];
                        }
                    }

                    // 更新滑块显示
                    function updateSlider(newValue, fromEvent = false) {
                        // 确保值在范围内
                        newValue = Math.max(min, Math.min(max, newValue));

                        // 更新滑块内部值
                        value = newValue;
                        slider.setAttribute('data-value', value);

                        // 计算填充宽度百分比
                        const range = max - min;
                        const percentage = ((value - min) / range) * 100;
                        fill.style.width = percentage + '%';

                        // 更新显示的值文本
                        if (specialValueMap[value] !== undefined) {
                            valueDisplay.textContent = specialValueMap[value];
                            // 为特殊文本值设置高亮样式
                            valueDisplay.style.color = "#a0a0a0";
                        } else if (sliderId === 'min-damage-slider' && value > 100) {
                            // 特殊处理Min-damage滑块，101-125范围显示为HP+1到HP+25
                            valueDisplay.textContent = 'HP+' + (value - 100);
                            valueDisplay.style.color = "white";
                        } else {
                            valueDisplay.textContent = value + suffix;
                            valueDisplay.style.color = "white";
                        }
                    }

                    // 鼠标点击和拖动事件
                    function handleSliderInteraction(e) {
                        e.preventDefault();

                        // 点击滑块时关闭所有下拉菜单
                        closeAllOpenDropdowns();

                        // 计算点击位置的值
                        const rect = track.getBoundingClientRect();
                        let percentage = (e.clientX - rect.left) / rect.width;
                        percentage = Math.max(0, Math.min(1, percentage));

                        const range = max - min;
                        const newValue = Math.round(min + (range * percentage));

                        // 更新滑块
                        updateSlider(newValue, true);

                        // 添加鼠标移动和鼠标松开事件
                        function handleMouseMove(moveEvent) {
                            moveEvent.preventDefault();
                            let movePercentage = (moveEvent.clientX - rect.left) / rect.width;
                            movePercentage = Math.max(0, Math.min(1, movePercentage));

                            const moveValue = Math.round(min + (range * movePercentage));
                            updateSlider(moveValue, true);
                        }

                        function handleMouseUp() {
                            document.removeEventListener('mousemove', handleMouseMove);
                            document.removeEventListener('mouseup', handleMouseUp);
                        }

                        document.addEventListener('mousemove', handleMouseMove);
                        document.addEventListener('mouseup', handleMouseUp);
                    }

                    // 添加事件监听器
                    track.addEventListener('mousedown', handleSliderInteraction);

                    // 初始设置滑块值
                    updateSlider(value);
                });

                console.log('所有滑块已初始化，共 ' + allSliders.length + ' 个');
            }

            // 初始化齿轮图标的函数
            function initializeSettingsIcons() {
                const allSettingsIcons = document.querySelectorAll('.settings-icon');

                // 移除所有齿轮图标上的现有事件监听器
                allSettingsIcons.forEach(icon => {
                    // 克隆并替换元素，以移除所有事件监听器
                    const newIcon = icon.cloneNode(true);
                    icon.parentNode.replaceChild(newIcon, icon);

                    // 添加新的点击事件监听器
                    newIcon.addEventListener('click', function (e) {
                        e.stopPropagation();  // 阻止事件冒泡，防止触发文档级点击事件

                        // 点击齿轮图标时关闭所有下拉菜单
                        closeAllOpenDropdowns();

                        // 获取对应的设置面板ID
                        let optionName = '';
                        const optionNameElement = this.parentElement.querySelector('.option-name');

                        // 处理带有工具提示的选项名称
                        if (optionNameElement.classList.contains('tooltip')) {
                            // 获取文本内容，不包括子元素
                            const textNodes = Array.from(optionNameElement.childNodes)
                                .filter(node => node.nodeType === Node.TEXT_NODE)
                                .map(node => node.textContent.trim())
                                .join('');
                            optionName = textNodes.toLowerCase().replace(/\s+/g, '-');
                        } else {
                            optionName = optionNameElement.textContent.toLowerCase().replace(/\s+/g, '-');
                        }

                        const panelId = optionName + '-panel';
                        const panel = document.getElementById(panelId);

                        if (panel) {
                            // 关闭所有其他面板
                            settingsPanels.forEach(p => {
                                if (p !== panel) {
                                    p.classList.remove('active');
                                }
                            });

                            // 切换当前面板显示状态
                            panel.classList.toggle('active');

                            // 如果有面板显示，则显示遮罩层
                            const anyPanelActive = Array.from(settingsPanels).some(p => p.classList.contains('active'));
                            if (anyPanelActive) {
                                overlay.classList.add('active');
                            } else {
                                overlay.classList.remove('active');
                            }

                            // 设置面板位置
                            const rect = this.getBoundingClientRect();
                            panel.style.left = rect.right + 10 + 'px';
                            panel.style.top = rect.top + 'px';

                            // 显示遮罩层
                            overlay.classList.add('active');
                        }
                    });
                });

                console.log('所有齿轮图标已重新初始化，共 ' + allSettingsIcons.length + ' 个');

                // 删除所有与颜色选择器相关的代码，这部分功能由initializeColorPicker函数处理
                // 不要在这里初始化颜色选择器按钮和事件
            }

            // Anti-aim面板控制逻辑
            function initializeAntiAimControls() {
                // 获取所有相关元素
                const pitchDropdown = document.getElementById('pitch-dropdown');
                const pitchGearIcon = pitchDropdown.parentElement.querySelector('.settings-icon');
                const pitchCustomPanel = document.getElementById('pitch-custom-panel');

                const pitchJitterDropdown = document.getElementById('pitch-jitter-dropdown');
                const pitchJitterGearIcon = pitchJitterDropdown.parentElement.querySelector('.settings-icon');
                const pitchJitterPanel = document.getElementById('pitch-jitter-panel');

                const yawDropdown = document.getElementById('yaw-dropdown');
                const yawGearIcon = yawDropdown.parentElement.querySelector('.settings-icon');
                const yawCustomPanel = document.getElementById('yaw-custom-panel');

                const yawJitterDropdown = document.getElementById('yaw-jitter-dropdown');
                const yawJitterGearIcon = yawJitterDropdown.parentElement.querySelector('.settings-icon');
                const yawJitterPanel = document.getElementById('yaw-jitter-panel');

                const overlay = document.getElementById('settings-overlay');

                // 立即根据当前选择设置齿轮图标的可见性
                const pitchSelectedValue = pitchDropdown.querySelector('.dropdown-display').textContent;
                pitchGearIcon.style.display = (pitchSelectedValue === 'Custom') ? 'block' : 'none';

                const pitchJitterSelectedValue = pitchJitterDropdown.querySelector('.dropdown-display').textContent;
                pitchJitterGearIcon.style.display = (pitchJitterSelectedValue === 'Center' || pitchJitterSelectedValue === 'Offset') ? 'block' : 'none';

                const yawSelectedValue = yawDropdown.querySelector('.dropdown-display').textContent;
                yawGearIcon.style.display = (yawSelectedValue === 'Custom') ? 'block' : 'none';

                const yawJitterSelectedValue = yawJitterDropdown.querySelector('.dropdown-display').textContent;
                yawJitterGearIcon.style.display = (yawJitterSelectedValue === 'Center' || yawJitterSelectedValue === 'Offset') ? 'block' : 'none';

                // 为齿轮图标直接添加点击事件
                if (pitchGearIcon) {
                    pitchGearIcon.addEventListener('click', function (e) {
                        e.stopPropagation();

                        // 关闭所有下拉菜单
                        closeAllOpenDropdowns();

                        // 获取当前选中的Pitch值
                        const currentPitchValue = pitchDropdown.querySelector('.dropdown-display').textContent;

                        // 关闭所有面板
                        document.querySelectorAll('.settings-panel').forEach(panel => {
                            panel.classList.remove('active');
                        });

                        // 打开Pitch Custom面板
                        if (pitchCustomPanel && currentPitchValue === 'Custom') {
                            pitchCustomPanel.classList.add('active');
                            pitchCustomPanel.style.left = (this.getBoundingClientRect().right + 10) + 'px';
                            pitchCustomPanel.style.top = this.getBoundingClientRect().top + 'px';
                            overlay.classList.add('active');
                        }
                    });
                }

                if (pitchJitterGearIcon) {
                    pitchJitterGearIcon.addEventListener('click', function (e) {
                        e.stopPropagation();

                        // 关闭所有下拉菜单
                        closeAllOpenDropdowns();

                        // 获取当前选中的Pitch Jitter值
                        const currentPitchJitterValue = pitchJitterDropdown.querySelector('.dropdown-display').textContent;

                        // 关闭所有面板
                        document.querySelectorAll('.settings-panel').forEach(panel => {
                            panel.classList.remove('active');
                        });

                        // 打开Pitch Jitter面板
                        if (pitchJitterPanel && (currentPitchJitterValue === 'Center' || currentPitchJitterValue === 'Offset')) {
                            pitchJitterPanel.classList.add('active');
                            pitchJitterPanel.style.left = (this.getBoundingClientRect().right + 10) + 'px';
                            pitchJitterPanel.style.top = this.getBoundingClientRect().top + 'px';
                            overlay.classList.add('active');
                        }
                    });
                }

                if (yawGearIcon) {
                    yawGearIcon.addEventListener('click', function (e) {
                        e.stopPropagation();

                        // 关闭所有下拉菜单
                        closeAllOpenDropdowns();

                        // 获取当前选中的Yaw值
                        const currentYawValue = yawDropdown.querySelector('.dropdown-display').textContent;

                        // 关闭所有面板
                        document.querySelectorAll('.settings-panel').forEach(panel => {
                            panel.classList.remove('active');
                        });

                        // 打开Yaw Custom面板
                        if (yawCustomPanel && currentYawValue === 'Custom') {
                            yawCustomPanel.classList.add('active');
                            yawCustomPanel.style.left = (this.getBoundingClientRect().right + 10) + 'px';
                            yawCustomPanel.style.top = this.getBoundingClientRect().top + 'px';
                            overlay.classList.add('active');
                        }
                    });
                }

                if (yawJitterGearIcon) {
                    yawJitterGearIcon.addEventListener('click', function (e) {
                        e.stopPropagation();

                        // 关闭所有下拉菜单
                        closeAllOpenDropdowns();

                        // 获取当前选中的Yaw Jitter值
                        const currentYawJitterValue = yawJitterDropdown.querySelector('.dropdown-display').textContent;

                        // 关闭所有面板
                        document.querySelectorAll('.settings-panel').forEach(panel => {
                            panel.classList.remove('active');
                        });

                        // 打开Yaw Jitter面板
                        if (yawJitterPanel && (currentYawJitterValue === 'Center' || currentYawJitterValue === 'Offset')) {
                            yawJitterPanel.classList.add('active');
                            yawJitterPanel.style.left = (this.getBoundingClientRect().right + 10) + 'px';
                            yawJitterPanel.style.top = this.getBoundingClientRect().top + 'px';
                            overlay.classList.add('active');
                        }
                    });
                }

                // 为dropdown-item添加点击事件，直接处理Pitch下拉选项的变化
                pitchDropdown.querySelectorAll('.dropdown-item').forEach(item => {
                    item.addEventListener('click', function () {
                        // 更新显示文本
                        pitchDropdown.querySelector('.dropdown-display').textContent = this.textContent;

                        // 更新齿轮图标显示状态
                        const isCustomSelected = this.textContent === 'Custom';
                        pitchGearIcon.style.display = isCustomSelected ? 'block' : 'none';
                    });
                });

                // Pitch Jitter下拉菜单与齿轮图标关联
                pitchJitterDropdown.querySelectorAll('.dropdown-item').forEach(item => {
                    item.addEventListener('click', function () {
                        // 更新显示文本
                        pitchJitterDropdown.querySelector('.dropdown-display').textContent = this.textContent;

                        // 更新齿轮图标显示状态
                        const isSpecialOption = this.textContent === 'Center' || this.textContent === 'Offset';
                        pitchJitterGearIcon.style.display = isSpecialOption ? 'block' : 'none';
                    });
                });

                // Yaw下拉菜单与齿轮图标关联
                yawDropdown.querySelectorAll('.dropdown-item').forEach(item => {
                    item.addEventListener('click', function () {
                        // 更新显示文本
                        yawDropdown.querySelector('.dropdown-display').textContent = this.textContent;


                        // 更新齿轮图标显示状态
                        const isCustomSelected = this.textContent === 'Custom';
                        yawGearIcon.style.display = isCustomSelected ? 'block' : 'none';
                    });
                });

                // Yaw Jitter下拉菜单与齿轮图标关联
                yawJitterDropdown.querySelectorAll('.dropdown-item').forEach(item => {
                    item.addEventListener('click', function () {
                        // 更新显示文本
                        yawJitterDropdown.querySelector('.dropdown-display').textContent = this.textContent;

                        // 更新齿轮图标显示状态
                        const isSpecialOption = this.textContent === 'Center' || this.textContent === 'Offset';
                        yawJitterGearIcon.style.display = isSpecialOption ? 'block' : 'none';
                    });
                });

                // 齿轮图标点击事件
                document.querySelectorAll('.settings-icon').forEach(icon => {
                    icon.addEventListener('click', function (e) {
                        e.stopPropagation();

                        // 检查是否是Anti-aim面板中已经单独处理过的图标
                        const isAntiAimSpecialIcon =
                            this === pitchGearIcon ||
                            this === pitchJitterGearIcon ||
                            this === yawGearIcon ||
                            this === yawJitterGearIcon;

                        // 如果是已经单独处理过的，直接返回
                        if (isAntiAimSpecialIcon) {
                            return;
                        }

                        const parentOption = this.closest('.option');
                        const optionName = parentOption.querySelector('.option-name').textContent.trim().toLowerCase();

                        // 关联面板ID与选项
                        let panelId = '';
                        if (optionName === 'mouse override') {
                            panelId = 'mouse-override-panel';
                        }
                        else if (optionName === 'autostop') {
                            panelId = 'autostop-panel';
                        }
                        else if (optionName === 'nospread') {
                            panelId = 'nospread-panel';
                        }
                        else if (optionName === 'doubletap') {
                            panelId = 'doubletap-panel';
                        }
                        // 添加其他需要的选项处理逻辑

                        if (panelId && document.getElementById(panelId)) {
                            // 关闭所有面板
                            document.querySelectorAll('.settings-panel').forEach(panel => {
                                panel.classList.remove('active');
                            });

                            // 打开指定面板
                            const panel = document.getElementById(panelId);
                            panel.classList.add('active');

                            // 初始化面板内的复选框
                            const panelCheckboxes = panel.querySelectorAll('.checkbox');
                            if (panelCheckboxes.length > 0) {
                                panelCheckboxes.forEach(checkbox => {
                                    // 移除现有事件监听器
                                    const newCheckbox = checkbox.cloneNode(true);
                                    checkbox.parentNode.replaceChild(newCheckbox, checkbox);

                                    // 添加点击事件
                                    newCheckbox.addEventListener('click', function (e) {
                                        e.stopPropagation();
                                        this.classList.toggle('checked');

                                        // 关闭所有下拉菜单
                                        closeAllOpenDropdowns();
                                    });
                                });
                                console.log('已初始化面板内的 ' + panelCheckboxes.length + ' 个复选框');
                            }

                            // 设置面板位置
                            const rect = this.getBoundingClientRect();

                            // 计算面板位置 - 显示在选项的右侧
                            panel.style.left = optionRect.right + 'px';
                            panel.style.top = optionRect.top + 'px';
                        }
                    });
                });
            }

            if (pasteColorBtn) {
                pasteColorBtn.addEventListener('click', function (e) {
                    e.stopPropagation();

                    // 关闭所有下拉菜单
                    closeAllOpenDropdowns();

                    // 从剪贴板读取
                    navigator.clipboard.readText()
                        .then(text => {
                            // 验证粘贴的文本是否是有效的颜色格式
                            if (/^#([0-9A-F]{6}|[0-9A-F]{8})$/i.test(text)) {
                                setColorFromHex(text);
                                // 视觉反馈
                                this.style.opacity = '1';
                                setTimeout(() => {
                                    this.style.opacity = '0.7';
                                }, 300);
                            }
                        })
                        .catch(err => {
                            console.error('无法粘贴颜色: ', err);
                        });
                });
            }

            // 初始化位置 - 居中显示
            function centerContainer() {
                const container = document.getElementById('draggable-container');
                const x = (window.innerWidth - container.offsetWidth) / 2;
                const y = (window.innerHeight - container.offsetHeight) / 2;
                container.style.left = x + 'px';
                container.style.top = y + 'px';
            }

            // 颜色选择器功能
            function initializeColorPicker() {
                // 获取DOM元素
                const colorPicker = document.getElementById('color-picker');
                const colorGradient = document.querySelector('.color-gradient');
                const hueSlider = document.getElementById('hue-slider');
                const opacitySlider = document.getElementById('opacity-slider');
                const colorCursor = document.getElementById('color-cursor');
                const hueCursor = document.getElementById('hue-cursor');
                const opacityThumb = document.getElementById('opacity-thumb');
                const colorValue = document.getElementById('color-value');
                const copyColorBtn = document.getElementById('copy-color');
                const pasteColorBtn = document.getElementById('paste-color');
                const redOption = document.getElementById('red-color');
                const greenOption = document.getElementById('green-color');

                // 当前状态
                let currentColor = { h: 0, s: 100, v: 100, a: 1 };
                let activeOption = null;

                // 保存每个颜色选项的颜色值
                const colorCache = {
                    'red-color': redOption.getAttribute('data-color') || '#ff4a4aff',
                    'green-color': greenOption.getAttribute('data-color') || '#4aff4aff'
                };

                console.log('初始颜色缓存:', colorCache);

                // HSV转RGB函数
                function hsvToRgb(h, s, v) {
                    s = s / 100;
                    v = v / 100;
                    const i = Math.floor(h * 6);
                    const f = h * 6 - i;
                    const p = v * (1 - s);
                    const q = v * (1 - f * s);
                    const t = v * (1 - (1 - f) * s);

                    let r, g, b;
                    switch (i % 6) {
                        case 0: r = v; g = t; b = p; break;
                        case 1: r = q; g = v; b = p; break;
                        case 2: r = p; g = v; b = t; break;
                        case 3: r = p; g = q; b = v; break;
                        case 4: r = t; g = p; b = v; break;
                        case 5: r = v; g = p; b = q; break;
                    }

                    return {
                        r: Math.round(r * 255),
                        g: Math.round(g * 255),
                        b: Math.round(b * 255)
                    };
                }

                // 更新颜色选择器UI
                function updateColorPicker() {
                    // 更新颜色值显示
                    const rgb = hsvToRgb(currentColor.h, currentColor.s, currentColor.v);
                    const hex = '#' +
                        rgb.r.toString(16).padStart(2, '0') +
                        rgb.g.toString(16).padStart(2, '0') +
                        rgb.b.toString(16).padStart(2, '0') +
                        Math.round(currentColor.a * 255).toString(16).padStart(2, '0');

                    // 设置颜色值输入框
                    if (colorValue) colorValue.value = hex;

                    // 更新当前选项颜色和缓存
                    if (activeOption) {
                        activeOption.style.backgroundColor = hex;
                        activeOption.setAttribute('data-color', hex);

                        // 更新颜色缓存
                        if (activeOption.id) {
                            colorCache[activeOption.id] = hex;
                            console.log('更新颜色缓存:', activeOption.id, hex);
                        }
                    }

                    // 更新渐变背景
                    if (colorGradient) {
                        const hueRgb = hsvToRgb(currentColor.h, 100, 100);
                        colorGradient.style.background = `linear-gradient(to right, white, rgb(${hueRgb.r}, ${hueRgb.g}, ${hueRgb.b}))`;
                    }

                    // 更新不透明度滑块背景
                    if (opacitySlider) {
                        const rgbOpacity = hsvToRgb(currentColor.h, currentColor.s, currentColor.v);
                        const hexOpacity = '#' +
                            rgbOpacity.r.toString(16).padStart(2, '0') +
                            rgbOpacity.g.toString(16).padStart(2, '0') +
                            rgbOpacity.b.toString(16).padStart(2, '0');

                        // 获取透明度滑块的填充元素
                        const opacityFill = document.getElementById('opacity-fill');
                        if (opacityFill) {
                            // 设置透明度渐变，从完全透明到完全不透明
                            opacityFill.style.background = `linear-gradient(to right, rgba(${rgbOpacity.r}, ${rgbOpacity.g}, ${rgbOpacity.b}, 0), rgba(${rgbOpacity.r}, ${rgbOpacity.g}, ${rgbOpacity.b}, 1))`;
                        }
                    }
                }

                // 定义全局可访问的setColorFromHex函数
                window.setColorFromHex = function (hex) {
                    // 解析十六进制颜色
                    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(hex);
                    if (result) {
                        const r = parseInt(result[1], 16);
                        const g = parseInt(result[2], 16);
                        const b = parseInt(result[3], 16);
                        const a = result[4] ? parseInt(result[4], 16) / 255 : 1;

                        // RGB转HSV
                        const max = Math.max(r, g, b);
                        const min = Math.min(r, g, b);
                        const d = max - min;
                        const s = max === 0 ? 0 : d / max;
                        const v = max / 255;

                        let h;
                        if (max === min) {
                            h = 0;
                        } else {
                            switch (max) {
                                case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                                case g: h = (b - r) / d + 2; break;
                                case b: h = (r - g) / d + 4; break;
                            }
                            h /= 6;
                        }

                        currentColor = {
                            h: h,
                            s: s * 100,
                            v: v * 100,
                            a: a
                        };

                        // 更新UI
                        if (colorCursor) colorCursor.style.left = (currentColor.s) + '%';
                        if (colorCursor) colorCursor.style.top = (100 - currentColor.v) + '%';
                        if (hueCursor) hueCursor.style.top = (currentColor.h * 100) + '%';
                        if (opacityThumb) opacityThumb.style.left = (currentColor.a * 100) + '%';

                        updateColorPicker();
                    }
                };

                // 为颜色选择器本身添加点击事件监听器，阻止事件传播
                if (colorPicker) {
                    colorPicker.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    });
                }

                // 颜色选择器事件处理
                if (colorGradient) {
                    colorGradient.addEventListener('mousedown', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const rect = this.getBoundingClientRect();
                        const handleColorSelection = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const x = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
                            const y = Math.max(0, Math.min(1, (e.clientY - rect.top) / rect.height));
                            currentColor.s = x * 100;
                            currentColor.v = (1 - y) * 100;
                            colorCursor.style.left = x * 100 + '%';
                            colorCursor.style.top = y * 100 + '%';
                            updateColorPicker();
                        };

                        handleColorSelection(e);

                        const mouseMove = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            handleColorSelection(e);
                        };

                        const mouseUp = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            document.removeEventListener('mousemove', mouseMove);
                            document.removeEventListener('mouseup', mouseUp);
                        };

                        document.addEventListener('mousemove', mouseMove);
                        document.addEventListener('mouseup', mouseUp);
                    });
                }

                // 色相滑块事件处理
                if (hueSlider) {
                    hueSlider.addEventListener('mousedown', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const rect = this.getBoundingClientRect();
                        const handleHueSelection = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const y = Math.max(0, Math.min(1, (e.clientY - rect.top) / rect.height));
                            currentColor.h = y;
                            hueCursor.style.top = y * 100 + '%';
                            updateColorPicker();
                        };

                        handleHueSelection(e);

                        const mouseMove = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            handleHueSelection(e);
                        };

                        const mouseUp = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            document.removeEventListener('mousemove', mouseMove);
                            document.removeEventListener('mouseup', mouseUp);
                        };

                        document.addEventListener('mousemove', mouseMove);
                        document.addEventListener('mouseup', mouseUp);
                    });
                }

                // 不透明度滑块事件处理
                if (opacitySlider) {
                    opacitySlider.addEventListener('mousedown', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const rect = this.getBoundingClientRect();
                        const handleOpacitySelection = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const x = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
                            currentColor.a = x;
                            opacityThumb.style.left = x * 100 + '%';
                            updateColorPicker();
                        };

                        handleOpacitySelection(e);

                        const mouseMove = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            handleOpacitySelection(e);
                        };

                        const mouseUp = function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            document.removeEventListener('mousemove', mouseMove);
                            document.removeEventListener('mouseup', mouseUp);
                        };

                        document.addEventListener('mousemove', mouseMove);
                        document.addEventListener('mouseup', mouseUp);
                    });
                }

                // 复制颜色按钮事件
                if (copyColorBtn) {
                    copyColorBtn.addEventListener('click', function (e) {
                        e.stopPropagation();
                        navigator.clipboard.writeText(colorValue.value)
                            .then(() => {
                                this.style.opacity = '1';
                                setTimeout(() => this.style.opacity = '0.7', 300);
                            });
                    });
                }

                // 粘贴颜色按钮事件
                if (pasteColorBtn) {
                    pasteColorBtn.addEventListener('click', function (e) {
                        e.stopPropagation();
                        navigator.clipboard.readText()
                            .then(text => {
                                if (/^#([0-9A-F]{6}|[0-9A-F]{8})$/i.test(text)) {
                                    window.setColorFromHex(text);
                                    this.style.opacity = '1';
                                    setTimeout(() => this.style.opacity = '0.7', 300);
                                }
                            });
                    });
                }

                // 初始化颜色选项 - 应用缓存的颜色
                function initializeColorOptions() {
                    document.querySelectorAll('.color-option').forEach(option => {
                        if (option.id && colorCache[option.id]) {
                            option.style.backgroundColor = colorCache[option.id];
                            option.setAttribute('data-color', colorCache[option.id]);
                            console.log('应用缓存颜色:', option.id, colorCache[option.id]);
                        }
                    });
                }

                // 初始应用一次缓存的颜色
                initializeColorOptions();

                // 初始化透明度滑块
                const opacityFill = document.getElementById('opacity-fill');
                if (opacityFill) {
                    const initialRgb = hsvToRgb(currentColor.h, currentColor.s, currentColor.v);
                    opacityFill.style.background = `linear-gradient(to right, rgba(${initialRgb.r}, ${initialRgb.g}, ${initialRgb.b}, 0), rgba(${initialRgb.r}, ${initialRgb.g}, ${initialRgb.b}, 1))`;
                }

                // 初始化颜色选项点击事件
                document.querySelectorAll('.color-option').forEach(option => {
                    option.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();

                        // 关闭所有打开的下拉菜单
                        if (typeof closeAllOpenDropdowns === 'function') {
                            closeAllOpenDropdowns();
                        }

                        // 确保之前的颜色选择器被关闭并保存
                        if (activeOption && activeOption !== this) {
                            console.log('切换颜色选项，保存之前的颜色:', activeOption.id);
                        }

                        // 设置当前活动选项
                        activeOption = this;

                        // 显示颜色选择器
                        if (colorPicker) {
                            const rect = this.getBoundingClientRect();
                            colorPicker.style.display = 'block';
                            colorPicker.style.left = rect.right + 10 + 'px';
                            colorPicker.style.top = rect.top + 'px';

                            // 从缓存或属性获取当前颜色
                            let currentOptionColor;
                            if (this.id && colorCache[this.id]) {
                                currentOptionColor = colorCache[this.id];
                            } else {
                                currentOptionColor = this.getAttribute('data-color');
                                if (this.id && currentOptionColor) {
                                    colorCache[this.id] = currentOptionColor;
                                }
                            }

                            console.log('打开颜色选择器:', this.id, '颜色:', currentOptionColor);

                            if (currentOptionColor) {
                                window.setColorFromHex(currentOptionColor);
                            }

                            // 显示遮罩
                            const overlay = document.getElementById('settings-overlay');
                            if (overlay) {
                                overlay.classList.add('active');
                            }
                        }
                    });
                });

                // 全局点击事件监听
                document.addEventListener('click', function (e) {
                    if (colorPicker && colorPicker.style.display === 'block') {
                        const isColorPickerClick = e.target.closest('#color-picker') ||
                            e.target.closest('.color-option');

                        if (!isColorPickerClick) {
                            // 在关闭前保存当前颜色到缓存
                            if (activeOption && activeOption.id) {
                                const currentHex = activeOption.getAttribute('data-color');
                                if (currentHex) {
                                    colorCache[activeOption.id] = currentHex;
                                    console.log('关闭颜色选择器，保存颜色:', activeOption.id, currentHex);
                                }
                            }

                            // 隐藏颜色选择器
                            colorPicker.style.display = 'none';

                            // 隐藏遮罩
                            const overlay = document.getElementById('settings-overlay');
                            if (overlay) {
                                overlay.classList.remove('active');
                            }

                            // 重置活动选项
                            activeOption = null;

                            // 应用所有缓存的颜色
                            initializeColorOptions();
                        }
                    }
                });
            }

            // 顶部菜单切换功能初始化
            function initTopNavigation() {
                const mainNavLinks = document.querySelectorAll('.main-nav li a');
                const contentPages = document.querySelectorAll('.page-content .page');

                mainNavLinks.forEach(link => {
                    link.addEventListener('click', function (e) {
                        e.preventDefault();

                        // 移除所有菜单项的激活状态
                        mainNavLinks.forEach(item => {
                            item.parentElement.classList.remove('active');
                        });

                        // 激活当前点击的菜单项
                        this.parentElement.classList.add('active');

                        // 获取对应的标签页ID
                        const tabId = this.getAttribute('data-tab');

                        // 隐藏所有页面
                        contentPages.forEach(page => {
                            page.classList.remove('active');
                            page.style.display = 'none';
                        });

                        // 显示对应页面
                        if (tabId === 'rage') {
                            const ragePage = document.getElementById('rage-content');
                            if (ragePage) {
                                ragePage.classList.add('active');
                                ragePage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'flex'; // 显示侧边栏

                                // 获取保存的RAGE菜单状态
                                const savedRageSubmenu = localStorage.getItem('lastRageSubmenu') || 'aimbot';

                                // 使用保存的RAGE状态
                                document.querySelectorAll('.sidebar-tab').forEach(tab => {
                                    tab.classList.remove('active');
                                });
                                document.querySelector(`.sidebar-tab[data-sidebar="${savedRageSubmenu}"]`).classList.add('active');

                                // 根据保存的状态设置页面
                                if (savedRageSubmenu === 'anti-aim') {
                                    // 显示anti-aim相关内容
                                    document.body.classList.add('show-anti-aim');
                                    document.querySelectorAll('.page').forEach(page => {
                                        page.classList.remove('active');
                                        if (page.classList.contains('anti-aim-page')) {
                                            page.classList.add('active');
                                            page.style.display = 'flex';
                                        } else {
                                            page.style.display = 'none';
                                        }
                                    });
                                } else {
                                    // 显示aimbot相关内容
                                    document.body.classList.remove('show-anti-aim');
                                    document.querySelectorAll('.page').forEach(page => {
                                        page.classList.remove('active');
                                        if (page.classList.contains('general-page')) {
                                            page.classList.add('active');
                                            page.style.display = 'flex';
                                        } else {
                                            page.style.display = 'none';
                                        }
                                    });
                                }

                                // 更新子菜单显示
                                document.querySelectorAll('.sub-menu').forEach(menu => {
                                    menu.classList.remove('active');
                                    if (menu.classList.contains(`${savedRageSubmenu}-menu`)) {
                                        menu.classList.add('active');
                                    }
                                });
                            }
                        } else if (tabId === 'legit') {
                            const legitPage = document.getElementById('legit-content');
                            if (legitPage) {
                                legitPage.classList.add('active');
                                legitPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'visuals') {
                            const visualsPage = document.getElementById('visuals-content');
                            if (visualsPage) {
                                visualsPage.classList.add('active');
                                visualsPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'misc') {
                            const miscPage = document.getElementById('misc-content');
                            if (miscPage) {
                                miscPage.classList.add('active');
                                miscPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'skins') {
                            const skinsPage = document.getElementById('skins-content');
                            if (skinsPage) {
                                skinsPage.classList.add('active');
                                skinsPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        } else if (tabId === 'lua') {
                            const luaPage = document.getElementById('lua-content');
                            if (luaPage) {
                                luaPage.classList.add('active');
                                luaPage.style.display = 'flex';
                                const sidebar = document.querySelector('.sidebar');
                                if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                            }
                        }

                        // 输出调试信息
                        console.log('切换到页面: ' + tabId);
                    });
                });
            }
        });

        // 菜单切换功能
        document.addEventListener('DOMContentLoaded', function () {
            // 初始化顶部菜单切换
            initTopMenu();

            // 初始化侧边栏标签
            initSidebarTabs();

            // 顶部菜单切换功能
            function initTopMenu() {
                const mainNavLinks = document.querySelectorAll('.main-nav li a');
                const pages = document.querySelectorAll('.page-content .page');

                // 默认激活第一个菜单项
                if (!document.querySelector('.main-nav li.active')) {
                    const firstMenuItem = document.querySelector('.main-nav li');
                    if (firstMenuItem) firstMenuItem.classList.add('active');
                }

                mainNavLinks.forEach(link => {
                    link.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation(); // 阻止事件冒泡

                        console.log('点击菜单项: ' + this.getAttribute('data-tab'));

                        try {
                            // 移除所有菜单项的激活状态
                            mainNavLinks.forEach(item => {
                                item.parentElement.classList.remove('active');
                            });

                            // 激活当前点击的菜单项
                            this.parentElement.classList.add('active');

                            // 获取对应的标签页ID
                            const tabId = this.getAttribute('data-tab');

                            // 隐藏所有页面
                            pages.forEach(page => {
                                page.classList.remove('active');
                                page.style.display = 'none';
                            });

                            // 移除所有相关的body类
                            document.body.classList.remove('show-anti-aim');
                            document.body.classList.remove('show-legit');

                            // 显示对应页面
                            if (tabId === 'rage') {
                                const ragePage = document.getElementById('rage-content');
                                if (ragePage) {
                                    ragePage.classList.add('active');
                                    ragePage.style.display = 'flex';
                                    const sidebar = document.querySelector('.sidebar');
                                    if (sidebar) sidebar.style.display = 'flex'; // 显示侧边栏
                                }
                            } else if (tabId === 'legit') {
                                const legitPage = document.getElementById('legit-content');
                                if (legitPage) {
                                    legitPage.classList.add('active');
                                    legitPage.style.display = 'flex';
                                    const sidebar = document.querySelector('.sidebar:not(.legit-sidebar)');
                                    if (sidebar) sidebar.style.display = 'none'; // 隐藏主侧边栏，但保留LEGIT的侧边栏
                                    document.body.classList.add('show-legit'); // 添加LEGIT页面的类
                                }
                            } else if (tabId === 'visuals') {
                                const visualsPage = document.getElementById('visuals-content');
                                if (visualsPage) {
                                    visualsPage.classList.add('active');
                                    visualsPage.style.display = 'flex';
                                    const sidebar = document.querySelector('.sidebar');
                                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                                }
                            } else if (tabId === 'misc') {
                                const miscPage = document.getElementById('misc-content');
                                if (miscPage) {
                                    miscPage.classList.add('active');
                                    miscPage.style.display = 'flex';
                                    const sidebar = document.querySelector('.sidebar');
                                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                                }
                            } else if (tabId === 'skins') {
                                const skinsPage = document.getElementById('skins-content');
                                if (skinsPage) {
                                    skinsPage.classList.add('active');
                                    skinsPage.style.display = 'flex';
                                    const sidebar = document.querySelector('.sidebar');
                                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                                }
                            } else if (tabId === 'lua') {
                                const luaPage = document.getElementById('lua-content');
                                if (luaPage) {
                                    luaPage.classList.add('active');
                                    luaPage.style.display = 'flex';
                                    const sidebar = document.querySelector('.sidebar');
                                    if (sidebar) sidebar.style.display = 'none'; // 隐藏侧边栏
                                }
                            }

                            // 输出调试信息
                            console.log('切换到页面: ' + tabId);
                        } catch (error) {
                            console.error('菜单切换出错: ', error);
                        }
                    });
                });
            }

            // 侧边栏标签切换功能
            function initSidebarTabs() {
                // 检查是否已经有激活的标签，如果没有，默认激活第一个
                if (!document.querySelector('.sidebar-tab.active')) {
                    const firstTab = document.querySelector('.sidebar-tab');
                    if (firstTab) firstTab.classList.add('active');
                }

                // 检查激活的标签是哪个，应用相应的类
                if (document.querySelector('.sidebar-tab[data-sidebar="anti-aim"]').classList.contains('active')) {
                    document.body.classList.add('show-anti-aim');
                }

                const sidebarTabs = document.querySelectorAll('.sidebar-tab');

                sidebarTabs.forEach(tab => {
                    tab.addEventListener('click', function () {
                        // 移除所有标签的active类
                        sidebarTabs.forEach(t => t.classList.remove('active'));

                        // 给当前点击的标签添加active类
                        this.classList.add('active');

                        // 获取侧边栏类型
                        const sidebarType = this.getAttribute('data-sidebar');

                        // 如果是anti-aim，添加对应的类到body
                        if (sidebarType === 'anti-aim') {
                            document.body.classList.add('show-anti-aim');

                            // 显示anti-aim页面
                            document.querySelectorAll('.page').forEach(page => {
                                if (page.classList.contains('anti-aim-page')) {
                                    page.classList.add('active');
                                    page.style.display = 'flex';
                                } else {
                                    page.classList.remove('active');
                                    page.style.display = 'none';
                                }
                            });
                        } else {
                            document.body.classList.remove('show-anti-aim');

                            // 显示general页面
                            document.querySelectorAll('.page').forEach(page => {
                                if (page.classList.contains('general-page')) {
                                    page.classList.add('active');
                                    page.style.display = 'flex';
                                } else {
                                    page.classList.remove('active');
                                    page.style.display = 'none';
                                }
                            });
                        }

                        // 隐藏所有二级菜单
                        document.querySelectorAll('.sub-menu').forEach(menu => {
                            menu.classList.remove('active');
                        });

                        // 显示对应的二级菜单
                        const targetMenu = document.querySelector(`.${sidebarType}-menu`);
                        if (targetMenu) {
                            targetMenu.classList.add('active');
                        }

                        console.log('切换侧边栏标签: ' + sidebarType);
                    });
                });
            }
        });
    </script>
</body>

</html>